(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0ac157f3"],{"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));t("d3b7");function s(e,a,t,s,l,n,i){try{var o=e[n](i),r=o.value}catch(p){return void t(p)}o.done?a(r):Promise.resolve(r).then(s,l)}function l(e){return function(){var a=this,t=arguments;return new Promise((function(l,n){var i=e.apply(a,t);function o(e){s(i,l,n,o,r,"next",e)}function r(e){s(i,l,n,o,r,"throw",e)}o(void 0)}))}}},bde6:function(e,a,t){},be4e:function(e,a,t){"use strict";t("bde6")},ecbe:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"div-new-package"},[t("p",{staticClass:"p-title"},[e._v("查看套餐")]),t("div",{staticClass:"div-divider"}),t("a-form",{ref:"form",staticClass:"my-form-package-look",attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"所属类别",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticClass:"span-item-value"},[e._v(e._s(e.uploadData.goodsInfo.goodsClassInfo.className)+" ")])]),t("a-form-item",{attrs:{label:"套餐名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticClass:"span-item-value"},[e._v(e._s(e.uploadData.templateName||e.uploadData.goodsInfo.goodsName)+" ")])]),t("a-form-item",{attrs:{label:"是否上架",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-switch",{attrs:{checked:e.uploadData.isOnline,disabled:""}})],1),t("a-form-item",{attrs:{label:"价格(￥)",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticClass:"span-item-value"},[e._v(e._s(e.uploadData.goodsInfo.price)+" ")])]),t("a-form-item",{attrs:{label:"有效期",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticClass:"span-item-value"},[e._v(e._s(e.uploadData.goodsInfo.theLastTimeName)+" ")])])],1),t("div",{staticClass:"div-package-type"},[e._m(0),e._l(e.goodsAttr,(function(a,s){return t("div",{key:s,staticClass:"div-item"},[t("div",{staticClass:"div-bg-package"},[t("span",{staticClass:"span-item-name"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 类别"+e._s(s+1)+" :")]),t("a-select",{staticClass:"span-item-value",attrs:{disabled:"","allow-clear":"",placeholder:"请选择服务类别"},model:{value:a.attrName,callback:function(t){e.$set(a,"attrName",t)},expression:"item.attrName"}},e._l(e.typeDatas,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1),e._m(1,!0),t("a-input-number",{staticStyle:{"margin-left":"3.5%"},attrs:{disabled:"",min:0,max:1e6},model:{value:a.attrValue,callback:function(t){e.$set(a,"attrValue",t)},expression:"item.attrValue"}}),e._m(2,!0),t("a-select",{staticClass:"span-item-value",attrs:{disabled:"","allow-clear":"",placeholder:"请选择上传资料"},model:{value:a.plusInfoVo.uploadDocFlag,callback:function(t){e.$set(a.plusInfoVo,"uploadDocFlag",t)},expression:"item.plusInfoVo.uploadDocFlag"}},e._l(e.uploadDatas,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.code}},[e._v(e._s(a.value)+" ")])})),1)],1),t("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-delete",attrs:{type:"primary"},on:{click:function(a){return e.deleteItem(s)}}},[e._v("刪除")])],1)})),t("a-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn-add",staticStyle:{"margin-top":"2%"},attrs:{type:"primary"},on:{click:e.addItem}},[e._v("添加")])],2),t("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"div-service-pic"},[e._m(3),t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,multiple:!0,"list-type":"picture-card","file-list":e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),e._m(4),t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,multiple:!0,"list-type":"picture-card","file-list":e.fileListBanner},on:{preview:e.handlePreviewBanner,change:e.handleChangeBanner}},[e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleBanner,footer:null},on:{cancel:e.handleCancelBanner}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageBanner}})])],1),e._m(5),t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,multiple:!0,"list-type":"picture-card","file-list":e.fileListDetail},on:{preview:e.handlePreviewDetail,change:e.handleChangeDetail}},[e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleDetail,footer:null},on:{cancel:e.handleCancelDetail}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageDetail}})])],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isPlan,expression:"isPlan"}],staticClass:"div-my-plan"},[t("div",{staticClass:"div-divider"}),t("div",{staticClass:"div-line-wrap"},[e._m(6),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.uploadData.templateName)+" ")])]),e._m(7),t("div",{staticClass:"div-health-plan"},e._l(e.uploadData.templateTask,(function(a,s){return t("div",{key:s,staticClass:"div-plan-item"},[e._m(8,!0),t("span",{staticClass:"span-des"},[e._v(e._s(e.uploadData.templateTask[s].inputDay))]),t("span",{staticClass:"span-des"},[e._v("天后")]),t("div",{staticClass:"div-top-right"}),t("div",{staticClass:"div-divider"}),e._l(e.uploadData.templateTask[s].templateTaskContent,(function(a,s){return t("div",{key:s,staticClass:"div-plan-item-elements"},[t("div",{staticClass:"div-element"},[t("div",{staticClass:"div-content"},[t("span",{staticClass:"span-item-name",staticStyle:{width:"36%"}},[e._v(" 计划类型 :")]),t("span",{staticClass:"span-item-content"},[e._v(" "+e._s(a.taskTypeName))])]),t("div",{staticClass:"div-content-value"},[t("span",{staticClass:"span-item-name",staticStyle:{width:"17%"}},[e._v(" 具体内容 :")]),t("span",{staticClass:"span-item-content"},[e._v(" "+e._s(a.contentDetail.detailName))])]),e._e(),t("div",{staticClass:"div-divider-elements"})],1)])}))],2)})),0)]),e._e(),t("div",{staticStyle:{height:"25px",color:"white"}})],1)},l=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"title-des"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 服务类别 :")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"5%"}},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 次数 :")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"5%"}},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 上传资料 :")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"title-des-pic"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 套餐图片 :（只允许上传1张，正方形比例）")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"title-des-pic"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 详情banner图片 :（建议尺寸比例7：4）")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"title-des-pic"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 商品详情")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"span-item-name"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 计划名称 :")])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"div-line-wrap"},[t("span",{staticClass:"span-item-name"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 计划内容 :")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("span",{staticClass:"span-item-name"},[t("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 计划时间 :")])}],n=t("1da1"),i=t("ade3"),o=(t("96cf"),t("ac1f"),t("1276"),t("7db0"),t("d3b7"),t("b0c0"),t("159b"),t("a434"),t("4cab")),r={components:{},data:function(){var e;return e={labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:5}},wrapperColN:{xs:{span:24},sm:{span:12}},hosCode:"444885559",loading:!1,hosData:[],periodData:[{code:1,valueName:"半年",value:6},{code:2,valueName:"一年",value:12},{code:3,valueName:"永久",value:1200}],keshiData:[],planId:"",actionUrl:"/api/content-api/fileUpload/uploadImgFile",headers:{authorization:"authorization-text"},form:this.$form.createForm(this),typeDatas:[],uploadDatas:[{code:"0",value:"无"},{code:"1",value:"重症医学科资料1"}],goodsAttrFull:[],goodsAttr:[],uploadData:{goodsInfo:{goodsClassInfo:{className:""},goodsName:"",belong:"",deptName:"",goodsType:"service_package",goodsSpec:"",imgList:[],previewList:[],bannerList:[],status:"",price:"",theLastTime:"120",goodsAttr:[]},templateTask:[],templateName:"",basetimeType:"0"},previewVisible:!1,previewVisibleBanner:!1,previewVisibleDetail:!1,previewImage:"",previewImageBanner:"",previewImageDetail:"",fileList:[],fileListBanner:[],fileListDetail:[]},Object(i["a"])(e,"periodData",[]),Object(i["a"])(e,"isPlan",!0),e},watch:{visible:function(){}},created:function(){var e=this;this.planId=this.$route.query.planId,Object(o["oc"])("GOODS_SERVICE_TYPE").then((function(a){if(0==a.code){e.typeDatas=a.data;for(var t=0;t<e.typeDatas.length;t++)e.goodsAttrFull.push({name:e.typeDatas[t].value,attrName:e.typeDatas[t].code,attrValue:"1",plusInfoVo:{uploadDocFlag:"0"}});e.getTimePeriod()}else e.$message.error(a.message)}))},methods:{getPlanDetailOut:function(){var e=this;Object(o["xb"])(this.planId).then((function(a){if(0==a.code){e.uploadData=a.data,e.uploadData.goodsInfo.goodsClassInfo||e.$set(e.uploadData.goodsInfo,"goodsClassInfo",{className:""}),1==e.uploadData.goodsInfo.status?e.$set(e.uploadData,"isOnline",!0):e.$set(e.uploadData,"isOnline",!1),1==e.uploadData.goodsInfo.topFlag?e.$set(e.uploadData,"isSuggest",!0):e.$set(e.uploadData,"isSuggest",!1);for(var t=function(a){var t=e.goodsAttrFull.find((function(t){return t.attrName==e.uploadData.goodsInfo.goodsAttr[a].attrName}));t&&t.attrName&&(e.$set(e.uploadData.goodsInfo.goodsAttr[a],"name",t.name),e.uploadData.goodsInfo.goodsAttr[a].plusInfo?e.$set(e.uploadData.goodsInfo.goodsAttr[a],"plusInfoVo",JSON.parse(JSON.stringify(e.uploadData.goodsInfo.goodsAttr[a].plusInfo))):e.$set(e.uploadData.goodsInfo.goodsAttr[a],"plusInfoVo",{uploadDocFlag:"0"}),e.goodsAttr.push(JSON.parse(JSON.stringify(e.uploadData.goodsInfo.goodsAttr[a]))))},s=0;s<e.uploadData.goodsInfo.goodsAttr.length;s++)t(s);if(e.uploadData.templateTask&&e.uploadData.templateTask.length>0)for(var l=0;l<e.uploadData.templateTask.length;l++){e.$set(e.uploadData.templateTask[l],"inputDay",e.uploadData.templateTask[l].execTime);for(var n=0;n<e.uploadData.templateTask[l].templateTaskContent.length;n++){var i=e.uploadData.templateTask[l].templateTaskContent[n].taskType;"Knowledge"==i?(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","健康宣教"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.title)):"Quest"==i?(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","健康问卷"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.questName)):"Remind"==i?(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","文字提醒"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.remindContent)):"Check"==i?(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","检查"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.checkType)):"Exam"==i?(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","检验"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.examType)):"Rdiagnosis"==i?(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","复诊提醒"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.remindContent)):"Ddiagnosis"==i&&(e.$set(e.uploadData.templateTask[l].templateTaskContent[n],"taskTypeName","用药提醒"),e.$set(e.uploadData.templateTask[l].templateTaskContent[n].contentDetail,"detailName",e.uploadData.templateTask[l].templateTaskContent[n].contentDetail.remindContent))}}else e.isPlan=!1;if(e.fileList.push({uid:"-1",name:"封面1",status:"done",url:e.uploadData.goodsInfo.previewList}),e.uploadData.goodsInfo.bannerList)for(var o=e.uploadData.goodsInfo.bannerList.split(","),r=0;r<o.length;r++)e.fileListBanner.push({uid:0-r+"",name:"Banner"+r,status:"done",url:o[r]});if(e.uploadData.goodsInfo.imgList)for(var p=e.uploadData.goodsInfo.imgList.split(","),d=0;d<p.length;d++)e.fileListDetail.push({uid:0-d+"",name:"详情"+d,status:"done",url:p[d]})}else e.$message.error(a.message);e.$set(e.uploadData.goodsInfo,"theLastTimeName",e.countMonth())}))},getTimePeriod:function(){var e=this;Object(o["oc"])("GOODS_EXPIRATION").then((function(a){0==a.code?(e.periodData=a.data,e.getPlanDetailOut()):e.$message.error(a.message)}))},countMonth:function(){var e,a=this;return this.periodData.forEach((function(t){t.code==a.uploadData.goodsInfo.theLastTime&&(e=t.value)})),e},getBase64:function(e){return new Promise((function(a,t){var s=new FileReader;s.readAsDataURL(e),s.onload=function(){return a(s.result)},s.onerror=function(e){return t(e)}}))},handleCancel:function(){this.previewVisible=!1},handleCancelBanner:function(){this.previewVisibleBanner=!1},handleCancelDetail:function(){this.previewVisibleDetail=!1},handlePreview:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImage=e.url||e.preview,a.previewVisible=!0;case 6:case"end":return t.stop()}}),t)})))()},handlePreviewBanner:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageBanner=e.url||e.preview,a.previewVisibleBanner=!0;case 6:case"end":return t.stop()}}),t)})))()},handlePreviewDetail:function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageDetail=e.url||e.preview,a.previewVisibleDetail=!0;case 6:case"end":return t.stop()}}),t)})))()},handleChange:function(e){var a=e.fileList;this.fileList=a},handleChangeBanner:function(e){var a=e.fileList;this.fileListBanner=a},handleChangeDetail:function(e){var a=e.fileList;this.fileListDetail=a},deleteItem:function(e){this.goodsAttr.splice(e,1)},addItem:function(){},validate:function(){var e=this,a=this.form.validateFields;a((function(a,t){if(!a){if(e.uploadData.goodsInfo.goodsName=t.goodsName,e.uploadData.goodsInfo.belong=t.belong,e.uploadData.goodsInfo.goodsSpec=t.goodsSpec,e.uploadData.goodsInfo.price=t.price,e.uploadData.goodsInfo.theLastTime=t.theLastTime,e.uploadData.goodsInfo.status=t.statusIf?"1":"3",e.uploadData.goodsInfo.topFlag=t.topFlagIf?"1":"0",e.uploadData.goodsInfo.goodsAttr=e.goodsAttr,e.uploadData.templateName=t.goodsName,0==e.fileList.length)return void e.$message.error("请上传套餐图片！");for(var s=0;s<e.fileList.length;s++)e.uploadData.goodsInfo.previewList.push(e.fileList[s].response.data.fileLinkUrl);if(0==e.fileListBanner.length)return void e.$message.error("请上传详情banner图片！");for(var l=0;l<e.fileListBanner.length;l++)e.uploadData.goodsInfo.bannerList.push(e.fileListBanner[l].response.data.fileLinkUrl);if(0==e.fileListDetail.length)return void e.$message.error("请上传商品详情图片！");for(var n=0;n<e.fileListDetail.length;n++)e.uploadData.goodsInfo.imgList.push(e.fileListDetail[n].response.data.fileLinkUrl);Object(o["cd"])(e.uploadData).then((function(a){0==a.code?(e.$message.success("保存成功"),e.$router.go(-1)):e.$message.error(a.message)}))}}))}}},p=r,d=(t("be4e"),t("2877")),c=Object(d["a"])(p,s,l,!1,null,null,null);a["default"]=c.exports}}]);
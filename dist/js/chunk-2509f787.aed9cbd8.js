(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2509f787","chunk-394006b2"],{"519e":function(e,a,t){"use strict";t("ae2a")},"5b9d":function(e,a,t){"use strict";t("dbff")},"916f":function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"订单详情",width:900,visible:e.visible,confirmLoading:e.confirmLoading,footer:null},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("div",{staticClass:"div-order-detail"},[t("div",{staticClass:"div-line-wrap"},[t("span",{staticClass:"span-item-name"},[e._v("订单编号 :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.record.orderId)+" ")]),t("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"3%"}},[e._v(" 订单状态 :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.getStatusText(e.record.status))+" ")])]),t("div",{staticClass:"div-line-wrap"},[t("span",{staticClass:"span-item-name"},[e._v(" 下单时间 :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.record.orderTime)+" ")]),t("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"3%"}},[e._v(" 支付时间 :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.record.updateTime)+" ")])]),t("div",{staticClass:"div-line-wrap"},[t("span",{staticClass:"span-item-name"},[e._v(" 用户ID :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.record.userIdIn)+" ")]),t("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"3%"}},[e._v(" 就诊人 :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.record.userNameIn)+" ")])]),t("div",{staticClass:"div-line-wrap"},[t("span",{staticClass:"span-item-name"},[e._v(" 总金额（元） :")]),t("span",{staticClass:"span-item-value"},[e._v(e._s(e.record.total)+" ")])]),t("div",{staticClass:"div-health-plan"},[t("div",{staticClass:"div-plan-item firstItem"},[t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(e.colName1))]),t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(e.colName2))]),t("span",{staticClass:"span-item-name"},[e._v(" 单价 （元） ")]),t("span",{staticClass:"span-item-name"},[e._v(" 数量")]),t("span",{staticClass:"span-item-name"},[e._v(" 金额（元） ")])]),e._l(e.record.goodsInfo,(function(a,s){return t("div",{key:s,staticClass:"div-plan-item"},["prescription"!=e.record.orderType?t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(a.goodsName))]):e._e(),"prescription"==e.record.orderType?t("span",{staticClass:"span-item-name"},[e._v(" 线上复诊")]):e._e(),"prescription"!=e.record.orderType?t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(a.goodsSpec))]):e._e(),"prescription"==e.record.orderType?t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(a.goodsName))]):e._e(),t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(a.price)+" ")]),t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(a.number))]),t("span",{staticClass:"span-item-name"},[e._v(" "+e._s(a.total)+" ")])])}))],2),2==e.record.status&&"admin"==e.roleName&&"register"==e.record.orderType?t("a-button",{staticClass:"btn-submit",staticStyle:{"margin-left":"42%","margin-top":"5%"},attrs:{type:"primary"},on:{click:e.goRefund}},[e._v("申请退单")]):e._e()],1)])],1)},r=[],n=(t("d3b7"),t("4cab")),o=t("9fb0"),i=t("2b0e"),d={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,roleName:"",colName1:"",colName2:"",form:this.$form.createForm(this),record:{}}},created:function(){var e=i["a"].ls.get(o["o"]);this.roleName=e.roleName},methods:{add:function(e){this.record={},this.record=e,this.visible=!0,"prescription"==this.record.orderType?(this.colName1="项目名称",this.colName2="药品清单"):(this.colName1="套餐名称",this.colName2="服务类别");for(var a=0;a<this.record.goodsInfo.length;a++)this.$set(this.record.goodsInfo[a],"total",this.record.goodsInfo[a].price*this.record.goodsInfo[a].number+""),this.$set(this.record.goodsInfo[a],"goodsSpec",this.record.goodsInfo[a].goodsClassInfo.className)},getStatusText:function(e){return 1==e?"待支付":2==e?"已完成":3==e?"支付中":4==e?"待收货":5==e?"订单取消":6==e?"已退款":7==e?"已配送":void 0},goRefund:function(){var e=this;Object(n["Gc"])({orderId:this.record.orderId}).then((function(a){a.success?(e.$message.success("申请成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",""),e.form.resetFields()):e.$message.error("申请失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){a?e.confirmLoading=!1:Object(n["dd"])(t).then((function(a){a.success?(e.$message.success("新增成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("新增失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},c=d,l=(t("5b9d"),t("2877")),u=Object(l["a"])(c,s,r,!1,null,null,null);a["default"]=u.exports},a66b:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"div-service"},[t("a-card",{staticClass:"card-right",attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"订单编号"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.$refs.table.refresh(!0)}},model:{value:e.queryParams.orderId,callback:function(a){e.$set(e.queryParams,"orderId",a)},expression:"queryParams.orderId"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"收款方"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态"},model:{value:e.queryParams.functionType,callback:function(a){e.$set(e.queryParams,"functionType",a)},expression:"queryParams.functionType"}},e._l(e.functionData,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.id}},[e._v(e._s(a.value))])})),1)],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"下单时间"}},[t("a-range-picker",{on:{change:e.onChange}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"订单状态"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态"},model:{value:e.queryParams.status,callback:function(a){e.$set(e.queryParams,"status",a)},expression:"queryParams.status"}},e._l(e.statusData,(function(a,s){return t("a-select-option",{key:s,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1),e._e(),t("a-col",{attrs:{md:3,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),e._e()],1)])],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.code}},scopedSlots:e._u([{key:"action",fn:function(a,s){return t("span",{},[t("a",{on:{click:function(a){return e.$refs.addForm.add(s)}}},[e._v("查看详情")])])}},{key:"status",fn:function(a,s){return t("span",{class:e.getClass(s.status)},[e._v(" "+e._s(s.statusText)+" ")])}}])}),t("add-form",{ref:"addForm",on:{ok:e.handleOk}})],1)],1)},r=[],n=(t("99af"),t("4d63"),t("ac1f"),t("25f0"),t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("9861"),t("5319"),t("2af9")),o=t("4cab"),i=t("916f"),d={components:{STable:n["s"],addForm:i["default"]},data:function(){var e=this;return{selectedRowKeys:[],advanced:!1,statusData:[{code:-1,value:"全部"},{code:1,value:"待支付"},{code:2,value:"已完成"},{code:3,value:"支付中"},{code:4,value:"待收货"},{code:5,value:"订单取消"},{code:6,value:"已退款"},{code:7,value:"已配送"}],functionData:[{code:-1,id:"",value:"全部"},{code:0,id:"0",value:"健康管家在线"},{code:1,id:"1",value:"互联网医院"}],partChoose:"",queryParams:{functionType:-1,endOrderTime:"",startOrderTime:"",orderId:"",status:-1,keyWord:""},columns:[{title:"订单编号",dataIndex:"orderId"},{title:"下单时间",dataIndex:"orderTime"},{title:"收款方",dataIndex:"functionTypeName"},{title:"就诊人",dataIndex:"userNameIn"},{title:"用户ID",dataIndex:"userIdIn"},{title:"订单状态",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"金额（元）",dataIndex:"accountSum"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(a){if(-1==e.queryParams.status&&delete e.queryParams.status,-1==e.queryParams.functionType&&(e.queryParams.functionType=""),e.queryParams.startOrderTime&&e.queryParams.endOrderTime){if(e.queryParams.startOrderTime>e.queryParams.endOrderTime)return e.$message.error("请选择开始时间小于结束时间"),delete e.queryParams.startOrderTime,delete e.queryParams.endOrderTime,void e.$refs.table.refresh();if(e.queryParams.startOrderTime){var t=e.formatDate(e.queryParams.startOrderTime);e.queryParams.startOrderTime=t+" 00:00:00"}if(e.queryParams.endOrderTime){var s=e.formatDate(e.queryParams.endOrderTime);e.queryParams.endOrderTime=s+" 23:59:59"}}else delete e.queryParams.startOrderTime,delete e.queryParams.endOrderTime;return Object(o["sb"])(Object.assign(a,e.queryParams)).then((function(a){for(var t=0;t<a.data.rows.length;t++)e.$set(a.data.rows[t],"xh",t+1+(a.data.pageNo-1)*a.data.pageSize),a.data.rows[t].userInfo&&(e.$set(a.data.rows[t],"userNameIn",a.data.rows[t].userInfo.userName),e.$set(a.data.rows[t],"userIdIn",a.data.rows[t].userInfo.userId)),e.$set(a.data.rows[t],"functionTypeName",0==a.data.rows[t].functionType?"健康管家在线":"互联网医院"),1==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","待支付"):2==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","已完成"):3==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","支付中"):4==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","待收货"):5==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","订单取消"):6==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","已退款"):7==a.data.rows[t].status&&e.$set(a.data.rows[t],"statusText","已配送");return a.data}))}}},created:function(){},methods:{formatDate:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,s=e.getDate();return t<10&&(t="0"+t),s<10&&(s="0"+s),"".concat(a,"-").concat(t,"-").concat(s)},getClass:function(e){return 1==e?"span-red":2==e?"span-blue":3==e?"span-red":4==e?"span-blue":5==e?"span-gray":7==e?"span-blue":void 0},exportExcel:function(){var e=this,a={};a=this.isSearchKeyword?{keyWord:this.queryParam.keyWord,exportType:"1"}:{keyWord:this.queryParam,exportType:"2"},exportPatients(a).then((function(a){e.downloadfile(a)})).catch((function(a){e.$message.error("导出错误："+a.message)}))},onChange:function(e,a){this.queryParams.startOrderTime=a[0],this.queryParams.endOrderTime=a[1]},downloadfile:function(e){var a=new Blob([e.data],{type:"application/octet-stream;charset=UTF-8"}),t=e.headers["content-disposition"],s=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),r=s.exec(t),n=r[1],o=document.createElement("a"),i=window.URL.createObjectURL(a),d=/^["](.*)["]$/g;o.style.display="none",o.href=i,o.download=decodeURI(n.replace(d,"$1")),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(i)},handleOk:function(){this.$refs.table.refresh()}}},c=d,l=(t("519e"),t("2877")),u=Object(l["a"])(c,s,r,!1,null,null,null);a["default"]=u.exports},ae2a:function(e,a,t){},dbff:function(e,a,t){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e623f8ce"],{"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t("d3b7");function r(e,a,t,r,i,l,s){try{var o=e[l](s),n=o.value}catch(c){return void t(c)}o.done?a(n):Promise.resolve(n).then(r,i)}function i(e){return function(){var a=this,t=arguments;return new Promise((function(i,l){var s=e.apply(a,t);function o(e){r(s,i,l,o,n,"next",e)}function n(e){r(s,i,l,o,n,"throw",e)}o(void 0)}))}}},"23ce":function(e,a,t){},"79f9":function(e,a,t){"use strict";t("23ce")},d815:function(e,a,t){"use strict";t.r(a);var r,i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.editTitle,width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"就诊人",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.userName))])]),t("a-form-item",{attrs:{label:"预约检查项",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.appointItemName))])]),t("a-form-item",{attrs:{label:"期望预约时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticStyle:{"margin-top":"6%"}},[e._v("日期 : "+e._s(e.record.appointDate))]),t("div",[e._v("时间段 : "+e._s(e.record.appointTime))])]),t("a-form-item",{attrs:{label:"检验申请单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[e.hasPic?t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,headers:e.headers,multiple:!0,"list-type":"picture-card","file-list":e.fileListBanner},on:{preview:e.handlePreviewBanner,change:e.handleChangeBanner}},[e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleBanner,footer:null},on:{cancel:e.handleCancelBanner}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageBanner}})])],1):t("span",{staticStyle:{color:"#333"}},[e._v("无")])]),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticStyle:{"font-weight":"bold","margin-left":"20%",color:"#333"}},[e._v("预约反馈:")])]),t("a-form-item",{attrs:{label:"预约状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:e.radioValue,callback:function(a){e.radioValue=a},expression:"radioValue"}},[t("a-radio",{attrs:{value:1}},[e._v(" 成功 ")]),t("a-radio",{staticStyle:{width:"100px"},attrs:{value:2}},[e._v(" 失败 ")])],1)],1),1==e.radioValue?t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticStyle:{"margin-left":"20%",color:"#333"}},[e._v("预约时间 :")])]):e._e(),1==e.radioValue?t("a-form-item",{attrs:{label:"日期",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-date-picker",{attrs:{"disabled-date":e.disabledDate,placeholder:"2021-12-31 "},model:{value:e.chooseDate,callback:function(a){e.chooseDate=a},expression:"chooseDate"}})],1):e._e(),1==e.radioValue?t("a-form-item",{attrs:{label:"时间段",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},e._l(e.timeData,(function(a,r){return t("span",{key:r,staticClass:"span-time",class:{chose:a.isChecked},staticStyle:{"margin-left":"0"},on:{click:function(a){return e.onPartChoose(r)}}},[e._v(e._s(a.value))])})),0):e._e(),1==e.radioValue?t("a-form-item",{attrs:{labelCol:e.labelCol,label:e.locationDes,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{attrs:{placeholder:"请输入地点"},model:{value:e.remark,callback:function(a){e.remark=a},expression:"remark"}})],1):e._e(),2==e.radioValue?t("a-form-item",{attrs:{label:"失败原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{attrs:{placeholder:"请输入失败原因"},model:{value:e.failReason,callback:function(a){e.failReason=a},expression:"failReason"}})],1):e._e()],1)],1)],1)},l=[],s=t("ade3"),o=t("1da1"),n=(t("96cf"),t("7db0"),t("d3b7"),t("ac1f"),t("1276"),t("4cab")),c=t("c1df"),d=t.n(c),h=t("9fb0"),f=t("2b0e"),p=t("ca00"),u={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},statusData:[],visible:!1,record:{},confirmLoading:!1,form:this.$form.createForm(this),chooseDate:"",editTitle:"ddd",actionUrl:"/api/content-api/fileUpload/uploadImgFile",fileListBanner:[],previewImageBanner:"",previewVisibleBanner:!1,remark:"",hasPic:!1,radioValue:1,locationDes:"",failReason:"",timeData:[],choseTimeItem:{},headers:{Authorization:""}}},created:function(){var e=this;this.headers.Authorization=f["a"].ls.get(h["a"]),Object(n["lc"])("APPOINT_TYPE").then((function(a){if(0==a.code&&a.data&&a.data.length>0){for(var t=0;t<a.data.length;t++)0==t?e.$set(a.data[t],"isChecked",!0):e.$set(a.data[t],"isChecked",!1);e.timeData=a.data,e.choseTimeItem=JSON.parse(JSON.stringify(e.timeData[0]))}}))},methods:(r={edit:function(e){this.visible=!0,this.record={},this.fileListBanner=[],this.record=e,"CHECK"==this.record.appointItem?this.locationDes="检查地点":"EXAM"==this.record.tradeType&&(this.locationDes="检验地点"),this.editTitle=e.tradeType;var a=this.record.tradeAppointLog.find((function(e){return"REQUEST"==e.dealType}));if(a&&a.dealImages&&a.dealImages.length>0){this.hasPic=!0;for(var t=a.dealImages.split(","),r=0;r<t.length;r++)this.fileListBanner.push({uid:0-r+"",name:"Banner"+r,status:"done",url:t[r]})}else this.hasPic=!1},disabledDate:function(e){return e&&e<d()().endOf("day")},handleCancel:function(){},onPartChoose:function(e){for(var a=0;a<this.timeData.length;a++)this.$set(this.timeData[a],"isChecked",!1),a==e&&(this.$set(this.timeData[a],"isChecked",!0),this.choseTimeItem=JSON.parse(JSON.stringify(this.timeData[a])))},handleSubmit:function(){var e=this;this.form.validateFields;if(1==this.radioValue){if(!this.chooseDate)return void this.$message.error("请选择预约日期！");if(!this.choseTimeItem)return void this.$message.error("请选择预约时段！");if(this.$set(this.record,"dealResult",Object(p["c"])(this.chooseDate)+" "+this.choseTimeItem.value),!this.remark)return void this.$message.error("请输入地点！");this.$set(this.record,"remark",this.remark),this.record.status=3}else{if(!this.failReason)return void this.$message.error("请填写失败原因！");this.record.status=4,this.$set(this.record,"dealResult",this.failReason)}this.confirmLoading=!0,Object(n["Xc"])(this.record).then((function(a){a.success?(e.$message.success("审批成功,系统将为患者发送预约结果短信通知"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok"),e.form.resetFields()):e.$message.error("审批失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}},Object(s["a"])(r,"handleCancel",(function(){this.form.resetFields(),this.visible=!1})),Object(s["a"])(r,"handlePreviewBanner",(function(e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageBanner=e.url||e.preview,a.previewVisibleBanner=!0;case 6:case"end":return t.stop()}}),t)})))()})),Object(s["a"])(r,"handleChangeBanner",(function(e){var a=e.fileList;this.fileListBanner=a})),Object(s["a"])(r,"handleCancelBanner",(function(){this.previewVisibleBanner=!1})),Object(s["a"])(r,"getBase64",(function(e){return new Promise((function(a,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return a(r.result)},r.onerror=function(e){return t(e)}}))})),r)},m=u,b=(t("79f9"),t("2877")),v=Object(b["a"])(m,i,l,!1,null,null,null);a["default"]=v.exports}}]);
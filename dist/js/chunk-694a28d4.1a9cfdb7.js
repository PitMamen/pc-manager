(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-694a28d4","chunk-0067aea1","chunk-0067aea1","chunk-899e6496"],{"0d09":function(e,a,t){},4151:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"div-inquiry-text"},[t("a-card",{staticClass:"card-right",attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"患者"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入患者"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.$refs.table.refresh(!0)}},model:{value:e.queryParams.userName,callback:function(a){e.$set(e.queryParams,"userName",a)},expression:"queryParams.userName"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"医生"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入医生"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.$refs.table.refresh(!0)}},model:{value:e.queryParams.execName,callback:function(a){e.$set(e.queryParams,"execName",a)},expression:"queryParams.execName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"问诊状态"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态"},model:{value:e.queryParams.execFlag,callback:function(a){e.$set(e.queryParams,"execFlag",a)},expression:"queryParams.execFlag"}},e._l(e.statusData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"科室"}},[t("div",{staticClass:"div-text-auto"},[t("a-auto-complete",{staticClass:"global-search",staticStyle:{width:"100%","font-size":"14px"},attrs:{size:"large",placeholder:"请输入并选择","option-label-prop":"title"},on:{select:e.onSelect,search:e.handleSearch},model:{value:e.chooseDeptItem.departmentName,callback:function(a){e.$set(e.chooseDeptItem,"departmentName",a)},expression:"chooseDeptItem.departmentName"}},[t("template",{slot:"dataSource"},e._l(e.keshiDataTemp,(function(a){return t("a-select-option",{key:a.departmentId+"",attrs:{title:a.departmentName}},[e._v(" "+e._s(a.departmentName)+" ")])})),1)],2)],1)])],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"时间"}},[t("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:e.queryParams.beginDate,callback:function(a){e.$set(e.queryParams,"beginDate",a)},expression:"queryParams.beginDate"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:e.queryParams.endDate,callback:function(a){e.$set(e.queryParams,"endDate",a)},expression:"queryParams.endDate"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),e._e()],1)])],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.code}},scopedSlots:e._u([{key:"action",fn:function(a,r){return t("span",{},[t("a",{attrs:{disabled:!r.canAsk},on:{click:function(a){return e.goClick(r)}}},[e._v(e._s(r.btnText))])])}}])}),t("add-form",{ref:"addForm",on:{ok:e.handleOk}}),t("record-form",{ref:"recordForm",on:{ok:e.handleOk}})],1)],1)},s=[],n=(t("d3b7"),t("3ca3"),t("ddb0"),t("99af"),t("4de4"),t("7db0"),t("4d63"),t("ac1f"),t("25f0"),t("2b3d"),t("9861"),t("5319"),t("2af9")),o=t("4cab"),c=t("e747"),d={components:{STable:n["s"],addForm:c["default"],recordForm:function(){return t.e("chunk-79db58d7").then(t.bind(null,"4d42"))}},data:function(){var e=this;return{selectedRowKeys:[],advanced:!1,statusData:[{code:-1,value:"全部"},{code:0,value:"已申请"},{code:1,value:"已完成"},{code:2,value:"已接诊"},{code:3,value:"已中止"}],partChoose:"",queryParams:{execDept:"",rightsType:"videoNum",userName:"",execName:"",execFlag:-1,beginDate:"",endDate:""},columns:[{title:"序号",dataIndex:"xh"},{title:"患者",dataIndex:"userName"},{title:"医生团队",dataIndex:"execName"},{title:"科室",dataIndex:"deptName"},{title:"预约时间",dataIndex:"appointTime"},{title:"问诊状态",dataIndex:"statusText"},{title:"接诊时长",dataIndex:"timeLength"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],chooseDeptItem:{},keshiDataTemp:[],loadData:function(a){if(-1==e.queryParams.execFlag&&delete e.queryParams.execFlag,e.queryParams.beginDate&&e.queryParams.endDate){if(e.queryParams.beginDate>e.queryParams.endDate)return e.$message.error("请选择开始时间小于结束时间"),delete e.queryParams.beginDate,delete e.queryParams.endDate,void e.$refs.table.refresh();if(e.queryParams.beginDate){var t=e.formatDate(e.queryParams.beginDate);e.queryParams.beginDate=t+" 00:00:00"}if(e.queryParams.endDate){var r=e.formatDate(e.queryParams.endDate);e.queryParams.endDate=r+" 23:59:59"}}else delete e.queryParams.beginDate,delete e.queryParams.endDate;return Object(o["wc"])(Object.assign(a,e.queryParams)).then((function(a){for(var t=0;t<a.data.rows.length;t++){e.$set(a.data.rows[t],"xh",t+1+(a.data.pageNo-1)*a.data.pageSize),e.$set(a.data.rows[t],"confirmTimeOut",a.data.rows[t].confirmTime?e.formatDateFull(a.data.rows[t].confirmTime):"");var r=(new Date).getTime();0==a.data.rows[t].execFlag?(e.$set(a.data.rows[t],"statusText","已申请"),e.$set(a.data.rows[t],"btnText","提醒医生"),e.$set(a.data.rows[t],"canAsk",!0)):1==a.data.rows[t].execFlag?(e.$set(a.data.rows[t],"statusText","已完成"),e.$set(a.data.rows[t],"btnText","聊天记录"),e.$set(a.data.rows[t],"canAsk",!0)):2==a.data.rows[t].execFlag&&a.data.rows[t].execTime<r?(e.$set(a.data.rows[t],"statusText","已接诊"),e.$set(a.data.rows[t],"btnText","聊天记录"),e.$set(a.data.rows[t],"canAsk",!1)):2==a.data.rows[t].execFlag&&a.data.rows[t].execTime>r?(e.$set(a.data.rows[t],"statusText","未接诊"),e.$set(a.data.rows[t],"btnText","提醒医生"),e.$set(a.data.rows[t],"canAsk",!0)):3==a.data.rows[t].execFlag&&(e.$set(a.data.rows[t],"statusText","已中止"),e.$set(a.data.rows[t],"btnText","聊天记录"),e.$set(a.data.rows[t],"canAsk",!1))}return a.data}))}}},created:function(){var e=this;Object(o["eb"])().then((function(a){0==a.code&&(e.keshiData=a.data,e.keshiDataTemp=JSON.parse(JSON.stringify(e.keshiData)))}))},methods:{formatDate:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,r=e.getDate();return t<10&&(t="0"+t),r<10&&(r="0"+r),"".concat(a,"-").concat(t,"-").concat(r)},formatDateFull:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),"".concat(a,"-").concat(t,"-").concat(r," ").concat(s,":").concat(n,":").concat(o)},goClick:function(e){1==e.execFlag?this.$refs.recordForm.add(e):this.$refs.addForm.add(e)},handleSearch:function(e){e?this.keshiDataTemp=this.keshiData.filter((function(a){return-1!=a.departmentName.indexOf(e)})):(this.keshiDataTemp=JSON.parse(JSON.stringify(this.keshiData)),this.chooseDeptItem={},this.queryParams.execDept="")},onSelect:function(e){this.queryParams.execDept=e,this.chooseDeptItem=JSON.parse(JSON.stringify(this.keshiData.find((function(a){return a.departmentId==e}))))},getClass:function(e){return 1==e?"span-red":2==e?"span-blue":3==e?"span-red":4==e?"span-blue":5==e?"span-gray":void 0},exportExcel:function(){var e=this,a={};a=this.isSearchKeyword?{keyWord:this.queryParam.keyWord,exportType:"1"}:{keyWord:this.queryParam,exportType:"2"},exportPatients(a).then((function(a){e.downloadfile(a)})).catch((function(a){e.$message.error("导出错误："+a.message)}))},downloadfile:function(e){var a=new Blob([e.data],{type:"application/octet-stream;charset=UTF-8"}),t=e.headers["content-disposition"],r=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),s=r.exec(t),n=s[1],o=document.createElement("a"),c=window.URL.createObjectURL(a),d=/^["](.*)["]$/g;o.style.display="none",o.href=c,o.download=decodeURI(n.replace(d,"$1")),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(c)},handleOk:function(){this.$refs.table.refresh()}}},i=d,l=(t("ef25"),t("2877")),u=Object(l["a"])(i,r,s,!1,null,null,null);a["default"]=u.exports},"504b":function(e,a,t){},6641:function(e,a,t){},"860a":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"div-inquiry-text"},[t("a-card",{staticClass:"card-right",attrs:{bordered:!1}},[t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"患者"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入患者"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.$refs.table.refresh(!0)}},model:{value:e.queryParams.userName,callback:function(a){e.$set(e.queryParams,"userName",a)},expression:"queryParams.userName"}})],1)],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"医生"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入医生"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.$refs.table.refresh(!0)}},model:{value:e.queryParams.execName,callback:function(a){e.$set(e.queryParams,"execName",a)},expression:"queryParams.execName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"问诊状态"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态"},model:{value:e.queryParams.execFlag,callback:function(a){e.$set(e.queryParams,"execFlag",a)},expression:"queryParams.execFlag"}},e._l(e.statusData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"科室"}},[t("div",{staticClass:"div-text-auto"},[t("a-auto-complete",{staticClass:"global-search",staticStyle:{width:"100%","font-size":"14px"},attrs:{size:"large",placeholder:"请输入并选择","option-label-prop":"title"},on:{select:e.onSelect,search:e.handleSearch},model:{value:e.chooseDeptItem.departmentName,callback:function(a){e.$set(e.chooseDeptItem,"departmentName",a)},expression:"chooseDeptItem.departmentName"}},[t("template",{slot:"dataSource"},e._l(e.keshiDataTemp,(function(a){return t("a-select-option",{key:a.departmentId+"",attrs:{title:a.departmentName}},[e._v(" "+e._s(a.departmentName)+" ")])})),1)],2)],1)])],1),t("a-col",{attrs:{md:5,sm:24}},[t("a-form-item",{attrs:{label:"时间"}},[t("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:e.queryParams.beginDate,callback:function(a){e.$set(e.queryParams,"beginDate",a)},expression:"queryParams.beginDate"}})],1)],1),t("a-col",{attrs:{md:4,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-date-picker",{attrs:{format:"YYYY-MM-DD"},model:{value:e.queryParams.endDate,callback:function(a){e.$set(e.queryParams,"endDate",a)},expression:"queryParams.endDate"}})],1)],1),t("a-col",{attrs:{md:3,sm:24}},[t("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),e._e()],1)])],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.code}},scopedSlots:e._u([{key:"action",fn:function(a,r){return t("span",{},[t("a",{attrs:{disabled:!r.canAsk},on:{click:function(a){return e.goClick(r)}}},[e._v(e._s(r.btnText))])])}}])}),t("add-form",{ref:"addForm",on:{ok:e.handleOk}}),t("record-form",{ref:"recordForm",on:{ok:e.handleOk}})],1)],1)},s=[],n=(t("99af"),t("4de4"),t("d3b7"),t("7db0"),t("4d63"),t("ac1f"),t("25f0"),t("3ca3"),t("ddb0"),t("2b3d"),t("9861"),t("5319"),t("2af9")),o=t("4cab"),c=t("e747"),d=t("4d42"),i={components:{STable:n["s"],addForm:c["default"],recordForm:d["default"]},data:function(){var e=this;return{selectedRowKeys:[],advanced:!1,statusData:[{code:-1,value:"全部"},{code:0,value:"已申请"},{code:1,value:"已完成"},{code:2,value:"已接诊"},{code:3,value:"已中止"}],partChoose:"",queryParams:{execDept:"",rightsType:"textNum",userName:"",execName:"",execFlag:-1,beginDate:"",endDate:""},columns:[{title:"序号",dataIndex:"xh"},{title:"患者",dataIndex:"userName"},{title:"医生团队",dataIndex:"execName"},{title:"科室",dataIndex:"deptName"},{title:"问诊时间",dataIndex:"appointTime"},{title:"问诊状态",dataIndex:"statusText"},{title:"接诊时间",dataIndex:"confirmTimeOut"},{title:"接诊间隔",dataIndex:"accountSum"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],chooseDeptItem:{},keshiDataTemp:[],loadData:function(a){if(-1==e.queryParams.execFlag&&delete e.queryParams.execFlag,e.queryParams.beginDate&&e.queryParams.endDate){if(e.queryParams.beginDate>e.queryParams.endDate)return e.$message.error("请选择开始时间小于结束时间"),delete e.queryParams.beginDate,delete e.queryParams.endDate,void e.$refs.table.refresh();if(e.queryParams.beginDate){var t=e.formatDate(e.queryParams.beginDate);e.queryParams.beginDate=t+" 00:00:00"}if(e.queryParams.endDate){var r=e.formatDate(e.queryParams.endDate);e.queryParams.endDate=r+" 23:59:59"}}else delete e.queryParams.beginDate,delete e.queryParams.endDate;return Object(o["wc"])(Object.assign(a,e.queryParams)).then((function(a){for(var t=0;t<a.data.rows.length;t++){e.$set(a.data.rows[t],"xh",t+1+(a.data.pageNo-1)*a.data.pageSize),e.$set(a.data.rows[t],"confirmTimeOut",a.data.rows[t].confirmTime?e.formatDateFull(a.data.rows[t].confirmTime):"");var r=(new Date).getTime();0==a.data.rows[t].execFlag?(e.$set(a.data.rows[t],"statusText","已申请"),e.$set(a.data.rows[t],"btnText","提醒医生"),e.$set(a.data.rows[t],"canAsk",!0)):1==a.data.rows[t].execFlag?(e.$set(a.data.rows[t],"statusText","已完成"),e.$set(a.data.rows[t],"btnText","聊天记录"),e.$set(a.data.rows[t],"canAsk",!0)):2==a.data.rows[t].execFlag&&a.data.rows[t].execTime<r?(e.$set(a.data.rows[t],"statusText","已接诊"),e.$set(a.data.rows[t],"btnText","聊天记录"),e.$set(a.data.rows[t],"canAsk",!1)):2==a.data.rows[t].execFlag&&a.data.rows[t].execTime>r?(e.$set(a.data.rows[t],"statusText","未接诊"),e.$set(a.data.rows[t],"btnText","提醒医生"),e.$set(a.data.rows[t],"canAsk",!0)):3==a.data.rows[t].execFlag&&(e.$set(a.data.rows[t],"statusText","已中止"),e.$set(a.data.rows[t],"btnText","聊天记录"),e.$set(a.data.rows[t],"canAsk",!1))}return a.data}))}}},created:function(){var e=this;Object(o["eb"])().then((function(a){0==a.code&&(e.keshiData=a.data,e.keshiDataTemp=JSON.parse(JSON.stringify(e.keshiData)))}))},methods:{formatDate:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,r=e.getDate();return t<10&&(t="0"+t),r<10&&(r="0"+r),"".concat(a,"-").concat(t,"-").concat(r)},formatDateFull:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),s=e.getHours(),n=e.getMinutes(),o=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),s<10&&(s="0"+s),n<10&&(n="0"+n),o<10&&(o="0"+o),"".concat(a,"-").concat(t,"-").concat(r," ").concat(s,":").concat(n,":").concat(o)},goClick:function(e){1==e.execFlag?this.$refs.recordForm.add(e):this.$refs.addForm.add(e)},handleSearch:function(e){e?this.keshiDataTemp=this.keshiData.filter((function(a){return-1!=a.departmentName.indexOf(e)})):(this.keshiDataTemp=JSON.parse(JSON.stringify(this.keshiData)),this.chooseDeptItem={},this.queryParams.execDept="")},onSelect:function(e){this.queryParams.execDept=e,this.chooseDeptItem=JSON.parse(JSON.stringify(this.keshiData.find((function(a){return a.departmentId==e}))))},getClass:function(e){return 1==e?"span-red":2==e?"span-blue":3==e?"span-red":4==e?"span-blue":5==e?"span-gray":void 0},exportExcel:function(){var e=this,a={};a=this.isSearchKeyword?{keyWord:this.queryParam.keyWord,exportType:"1"}:{keyWord:this.queryParam,exportType:"2"},exportPatients(a).then((function(a){e.downloadfile(a)})).catch((function(a){e.$message.error("导出错误："+a.message)}))},downloadfile:function(e){var a=new Blob([e.data],{type:"application/octet-stream;charset=UTF-8"}),t=e.headers["content-disposition"],r=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),s=r.exec(t),n=s[1],o=document.createElement("a"),c=window.URL.createObjectURL(a),d=/^["](.*)["]$/g;o.style.display="none",o.href=c,o.download=decodeURI(n.replace(d,"$1")),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(c)},handleOk:function(){this.$refs.table.refresh()}}},l=i,u=(t("e88f"),t("2877")),m=Object(u["a"])(l,r,s,!1,null,null,null);a["default"]=m.exports},9973:function(e,a,t){"use strict";t("6641")},e747:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"温馨提示",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("div",{staticClass:"div-order-detail"},[e._v("是否提醒医生及时接诊？")])])],1)},s=[],n=t("4cab"),o={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,record:{}}},methods:{add:function(e){this.record={},this.record=e,this.visible=!0},handleSubmit:function(){var e=this;this.confirmLoading=!0;var a={remindType:"videoRemind",eventType:3,userId:this.record.userId,tradeId:this.record.tradeId};Object(n["fd"])(a).then((function(a){e.confirmLoading=!1,0==a.code?(e.$message.success("提醒成功"),e.visible=!1):e.$message.error("提醒失败："+a.message)}))},handleCancel:function(){this.visible=!1}}},c=o,d=(t("9973"),t("2877")),i=Object(d["a"])(c,r,s,!1,null,null,null);a["default"]=i.exports},e88f:function(e,a,t){"use strict";t("0d09")},ef25:function(e,a,t){"use strict";t("504b")}}]);
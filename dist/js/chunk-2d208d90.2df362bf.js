(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d208d90"],{a715:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"新增专病",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"专病名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["diseaseName",{rules:[{required:!0,message:"请输入专病名称！"}]}],expression:"['diseaseName', { rules: [{ required: true, message: '请输入专病名称！' }] }]"}],attrs:{placeholder:"请输入专病名称"}})],1),a("a-form-item",{attrs:{label:"所属科室",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("div",{staticClass:"global-search-wrapper",staticStyle:{width:"300px",display:"inline-block"}},[a("a-auto-complete",{staticClass:"global-search",staticStyle:{width:"100%","font-size":"14px"},attrs:{size:"large",placeholder:"请输入并选择","option-label-prop":"title"},on:{select:e.onSelect,search:e.handleSearch}},[a("template",{slot:"dataSource"},e._l(e.keshiDataTemp,(function(t){return a("a-select-option",{key:t.departmentId+"",attrs:{title:t.departmentName}},[e._v(" "+e._s(t.departmentName)+" ")])})),1)],2)],1)])],1)],1)],1)},i=[],n=(a("4de4"),a("d3b7"),a("7db0"),a("4cab")),r={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},keshiData:[],visible:!1,confirmLoading:!1,form:this.$form.createForm(this),chooseDeptItem:{},keshiDataTemp:[]}},created:function(){},methods:{add:function(e){this.getDeptsOut(),this.visible=!0},getDeptsOut:function(){var e=this;Object(n["eb"])(this.queryParam).then((function(t){if(0==t.code){for(var a=0;a<t.data.length;a++)e.$set(t.data[a],"xh",a+1);e.keshiData=t.data,e.keshiDataTemp=JSON.parse(JSON.stringify(e.keshiData))}}))},handleSearch:function(e){this.keshiDataTemp=e?this.keshiData.filter((function(t){return-1!=t.departmentName.indexOf(e)})):JSON.parse(JSON.stringify(this.keshiData))},onSelect:function(e){this.chooseDeptItem=this.keshiData.find((function(t){return t.departmentId==e}))},handleSubmit:function(){var e=this,t=this.form.validateFields;this.chooseDeptItem.departmentId?(this.confirmLoading=!0,t((function(t,a){t?e.confirmLoading=!1:(e.$set(a,"departmentId",e.chooseDeptItem.departmentId),Object(n["gc"])(a).then((function(t){t.success?(e.$message.success("新增成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",a),e.form.resetFields()):e.$message.error("新增失败："+t.message)})).finally((function(t){e.confirmLoading=!1})))}))):this.$message.error("请选择科室")},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},o=r,l=a("2877"),c=Object(l["a"])(o,s,i,!1,null,null,null);t["default"]=c.exports}}]);
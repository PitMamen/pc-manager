(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-517fd7fc"],{"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return i}));t("d3b7");function r(e,a,t,r,i,s,n){try{var o=e[s](n),l=o.value}catch(c){return void t(c)}o.done?a(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var a=this,t=arguments;return new Promise((function(i,s){var n=e.apply(a,t);function o(e){r(n,i,s,o,l,"next",e)}function l(e){r(n,i,s,o,l,"throw",e)}o(void 0)}))}}},"37cf":function(e,a,t){"use strict";t("8bcd")},"8bcd":function(e,a,t){},ff7b:function(e,a,t){"use strict";t.r(a);var r,i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.editTitle,width:900,footer:null,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"就诊人",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.userName))])]),t("a-form-item",{attrs:{label:"预约检查项",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.appointItemName))])]),t("a-form-item",{attrs:{label:"期望预约时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticStyle:{"margin-top":"6%"}},[e._v("日期 : "+e._s(e.record.appointDate))]),t("div",[e._v("时间段 : "+e._s(e.record.appointTime))])]),t("a-form-item",{attrs:{label:"检验申请单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[e.hasPic?t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,multiple:!0,"list-type":"picture-card","file-list":e.fileListBanner},on:{preview:e.handlePreviewBanner,change:e.handleChangeBanner}},[e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleBanner,footer:null},on:{cancel:e.handleCancelBanner}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageBanner}})])],1):t("span",{staticStyle:{color:"#333"}},[e._v("无")])]),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticStyle:{"font-weight":"bold","margin-left":"20%",color:"#333"}},[e._v("预约反馈:")])]),t("a-form-item",{attrs:{label:"预约状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s("已申请"==e.record.statusText?"待审批":e.record.statusText))])]),3==e.record.status?t("a-form-item",{attrs:{label:"预约时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.dealResult))])]):e._e(),4==e.record.status?t("a-form-item",{attrs:{label:"失败原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.dealResult))])]):e._e(),3==e.record.status||4==e.record.status?t("a-form-item",{attrs:{label:"处理时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.updateTimeOut))])]):e._e()],1)],1)],1)},s=[],n=t("ade3"),o=t("1da1"),l=(t("96cf"),t("7db0"),t("d3b7"),t("ac1f"),t("1276"),t("4cab")),c=t("ca00"),d={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},statusData:[],visible:!1,record:{},confirmLoading:!1,form:this.$form.createForm(this),chooseDate:"",editTitle:"ddd",actionUrl:"/api/conten-tapi/fileUpload/uploadImgFile",fileListBanner:[],previewImageBanner:"",previewVisibleBanner:!1,remark:"",hasPic:!1,radioValue:1,locationDes:"",failReason:"",timeData:[],choseTimeItem:{}}},created:function(){var e=this;Object(l["ic"])("APPOINT_TYPE").then((function(a){if(0==a.code&&a.data&&a.data.length>0){for(var t=0;t<a.data.length;t++)0==t?e.$set(a.data[t],"isChecked",!0):e.$set(a.data[t],"isChecked",!1);e.timeData=a.data,e.choseTimeItem=JSON.parse(JSON.stringify(e.timeData[0]))}}))},methods:(r={edit:function(e){this.visible=!0,this.record={},this.fileListBanner=[],this.record=e,"CHECK"==this.record.appointItem?this.locationDes="检查地点":"EXAM"==this.record.tradeType&&(this.locationDes="检验地点"),this.editTitle=e.tradeType;var a=this.record.tradeAppointLog.find((function(e){return"REQUEST"==e.dealType}));if(a&&a.dealImages&&a.dealImages.length>0){this.hasPic=!0;for(var t=a.dealImages.split(","),r=0;r<t.length;r++)this.fileListBanner.push({uid:0-r+"",name:"Banner"+r,status:"done",url:t[r]})}else this.hasPic=!1},handleCancel:function(){},onPartChoose:function(e){for(var a=0;a<this.timeData.length;a++)this.$set(this.timeData[a],"isChecked",!1),a==e&&(this.$set(this.timeData[a],"isChecked",!0),this.choseTimeItem=JSON.parse(JSON.stringify(this.timeData[a])))},handleSubmit:function(){var e=this;this.form.validateFields;if(1==this.radioValue){if(!this.chooseDate)return void this.$message.error("请选择预约日期！");if(this.record.appointDate=Object(c["c"])(this.chooseDate),!this.choseTimeItem)return void this.$message.error("请选择预约时段！");if(this.$set(this.record,"appointTime",this.choseTimeItem.value),!this.remark)return void this.$message.error("请输入地点！");this.$set(this.record,"remark",this.remark),this.record.status=3}else{if(!this.failReason)return void this.$message.error("请填写失败原因！");this.record.status=4,this.$set(this.record,"dealResult",this.failReason)}this.confirmLoading=!0,Object(l["Uc"])(this.record).then((function(a){a.success?(e.$message.success("审批成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok"),e.form.resetFields()):e.$message.error("审批失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}},Object(n["a"])(r,"handleCancel",(function(){this.form.resetFields(),this.visible=!1})),Object(n["a"])(r,"handlePreviewBanner",(function(e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageBanner=e.url||e.preview,a.previewVisibleBanner=!0;case 6:case"end":return t.stop()}}),t)})))()})),Object(n["a"])(r,"handleChangeBanner",(function(e){var a=e.fileList;this.fileListBanner=a})),Object(n["a"])(r,"handleCancelBanner",(function(){this.previewVisibleBanner=!1})),Object(n["a"])(r,"getBase64",(function(e){return new Promise((function(a,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return a(r.result)},r.onerror=function(e){return t(e)}}))})),r)},h=d,p=(t("37cf"),t("2877")),f=Object(p["a"])(h,i,s,!1,null,null,null);a["default"]=f.exports}}]);
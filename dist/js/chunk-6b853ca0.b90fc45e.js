(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b853ca0","chunk-1df0200c","chunk-2d0cbe37"],{"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));t("d3b7");function r(e,a,t,r,s,o,i){try{var l=e[o](i),n=l.value}catch(c){return void t(c)}l.done?a(n):Promise.resolve(n).then(r,s)}function s(e){return function(){var a=this,t=arguments;return new Promise((function(s,o){var i=e.apply(a,t);function l(e){r(i,s,o,l,n,"next",e)}function n(e){r(i,s,o,l,n,"throw",e)}l(void 0)}))}}},"4c1c":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"编辑角色",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"管理科室",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["caseManageIds",{rules:[{required:!0,message:"请选择管理科室！"}]}],expression:"['caseManageIds', { rules: [{ required: true, message: '请选择管理科室！' }] }]"}],attrs:{"allow-clear":"",mode:"multiple",placeholder:"请选择管理科室"}},e._l(e.keshiDataPerson,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.departmentId}},[e._v(e._s(a.departmentName))])})),1)],1)],1)],1)],1)},s=[],o=t("4cab"),i={data:function(){return{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:11}},visible:!1,confirmLoading:!1,keshiDataPerson:[],caseManageIds:[],form:this.$form.createForm(this)}},created:function(){this.getDeptsOut()},methods:{add:function(e){var a=this;this.caseManageIds=e,this.visible=!0,setTimeout((function(){a.form.setFieldsValue({caseManageIds:e})}),100)},getDeptsOut:function(){var e=this;Object(o["eb"])().then((function(a){0==a.code&&(e.keshiDataPerson=JSON.parse(JSON.stringify(a.data)),e.keshiDataPerson.shift())}))},handleSubmit:function(){var e=this,a=this.form.validateFields;a((function(a,t){a?e.confirmLoading=!1:(e.$emit("ok",t),e.visible=!1)}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},l=i,n=t("2877"),c=Object(n["a"])(l,r,s,!1,null,null,null);a["default"]=c.exports},"65ab":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"编辑角色",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"头像",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{action:e.actionUrl,headers:e.headers,multiple:!0,"list-type":"picture-card","file-list":e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?t("div",[t("a-icon",{attrs:{type:"plus"}}),t("div",{staticClass:"ant-upload-text"},[e._v("Upload")])],1):e._e()]),t("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancelPreview}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)]),t("a-form-item",{attrs:{label:"职级",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["professionalTitle",{rules:[{required:!1,message:"请输入职级！"}]}],expression:"['professionalTitle', { rules: [{ required: false, message: '请输入职级！' }] }]"}],attrs:{placeholder:"请输入职级"}})],1),t("a-form-item",{attrs:{label:"擅长",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["expertInDisease",{rules:[{required:!1,message:"请输入擅长！"}]}],expression:"['expertInDisease', { rules: [{ required: false, message: '请输入擅长！' }] }]"}],attrs:{placeholder:"请输入擅长"}})],1),t("a-form-item",{attrs:{label:"个人简介",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["doctorBrief",{rules:[{required:!1,message:"请输入个人简介！"}]}],expression:"['doctorBrief', { rules: [{ required: false, message: '请输入个人简介！' }] }]"}],attrs:{placeholder:"请输入个人简介"}})],1)],1)],1)],1)},s=[],o=t("1da1"),i=(t("d3b7"),t("96cf"),t("9fb0")),l=t("2b0e"),n={data:function(){return{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:11}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),fileList:[],previewVisible:!1,docInfo:{},previewImage:"",actionUrl:"/api/content-api/fileUpload/uploadImgFile",headers:{Authorization:""}}},created:function(){this.headers.Authorization=l["a"].ls.get(i["a"])},methods:{add:function(e){var a=this;this.fileList=[],this.docInfo=e,this.visible=!0,this.docInfo&&(setTimeout((function(){a.form.setFieldsValue({professionalTitle:e.professionalTitle,expertInDisease:e.expertInDisease,doctorBrief:e.doctorBrief})}),100),this.docInfo.avatarUrl&&this.fileList.push({uid:"-1",name:"封面1",status:"done",url:this.docInfo.avatarUrl}))},handleChange:function(e){"done"==e.file.status&&0!=e.file.response.code?(this.$message.error(e.file.response.message),e.fileList.pop(),this.fileList=e.fileList):this.fileList=e.fileList},handleCancelPreview:function(){this.previewVisible=!1},handlePreview:function(e){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImage=e.url||e.preview,a.previewVisible=!0;case 6:case"end":return t.stop()}}),t)})))()},getBase64:function(e){return new Promise((function(a,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return a(r.result)},r.onerror=function(e){return t(e)}}))},handleSubmit:function(){var e=this,a=this.form.validateFields;a((function(a,t){a?e.confirmLoading=!1:(e.fileList.length>0&&(e.$set(t,"avatarUrl",""),e.fileList[0].response?t.avatarUrl=e.fileList[0].response.data.fileLinkUrl:t.avatarUrl=e.fileList[0].url),e.$emit("ok",t),e.visible=!1)}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},c=n,d=t("2877"),u=Object(d["a"])(c,r,s,!1,null,null,null);a["default"]=u.exports},afe5:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"编辑用户",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"登录账号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["loginName",{rules:[{required:!0,message:"请输入登录账号！"}],getValueFromEvent:function(e){return e.target.value.replace(/[\u4E00-\u9FA5]/g,"")}}],expression:"[\n            'loginName',\n            {\n              rules: [{ required: true, message: '请输入登录账号！' }],\n              getValueFromEvent: (event) => {\n                return event.target.value.replace(/[\\u4E00-\\u9FA5]/g, '')\n              },\n            },\n          ]"}],attrs:{placeholder:"请输入登录账号"}})],1),t("a-form-item",{attrs:{label:"登录密码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!1,message:"请输入登录密码！"},{validator:e.isPassword}]}],expression:"[\n            'password',\n            { rules: [{ required: false, message: '请输入登录密码！' }, { validator: isPassword }] },\n          ]"}],attrs:{placeholder:"请输入登录密码"}})],1),t("a-form-item",{attrs:{label:"用户姓名",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"请输入用户姓名！"}]}],expression:"['userName', { rules: [{ required: true, message: '请输入用户姓名！' }] }]"}],attrs:{placeholder:"请输入用户姓名"}})],1),t("a-form-item",{attrs:{label:"身份证号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["identificationNo",{rules:[{required:!0,message:"请输入身份证号！"}]}],expression:"['identificationNo', { rules: [{ required: true, message: '请输入身份证号！' }] }]"}],attrs:{placeholder:"请输入身份证号",type:"number"}})],1),t("a-form-item",{attrs:{label:"手机号",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{rules:[{required:!0,message:"请输入手机号！"}]}],expression:"['phone', { rules: [{ required: true, message: '请输入手机号！' }] }]"}],attrs:{placeholder:"请输入手机号",type:"number"}})],1),t("a-form-item",{attrs:{label:"所属部门",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticClass:"global-search-wrapper",staticStyle:{width:"300px",display:"inline-block"}},[t("a-auto-complete",{staticClass:"global-search",staticStyle:{width:"100%","font-size":"14px"},attrs:{size:"large",placeholder:"请输入并选择部门","option-label-prop":"title"},on:{select:e.onSelect,search:e.handleSearch},model:{value:e.chooseDeptItem.departmentName,callback:function(a){e.$set(e.chooseDeptItem,"departmentName",a)},expression:"chooseDeptItem.departmentName"}},[t("template",{slot:"dataSource"},e._l(e.keshiDataTemp,(function(a){return t("a-select-option",{key:a.departmentId+"",attrs:{title:a.departmentName}},[e._v(" "+e._s(a.departmentName)+" ")])})),1)],2)],1)]),t("a-form-item",{attrs:{label:"用户状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":"",valuePropName:"checked"}},[t("a-switch",{attrs:{checked:e.isOpen},on:{change:e.isOpenChange}})],1),t("a-form-item",{attrs:{label:"用户角色",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":"",valuePropName:"checked"}},[t("a-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加角色")])],1),e._l(e.roles,(function(a,r){return t("a-form-item",{key:r,attrs:{label:"请选择角色名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":"",valuePropName:"checked",value:a.code}},[t("a-select",{staticStyle:{width:"50%"},attrs:{"allow-clear":"",placeholder:"请选择角色"},on:{select:e.onRoleSelect},model:{value:a.roleId,callback:function(t){e.$set(a,"roleId",t)},expression:"item.roleId"}},e._l(e.roleList,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.roleId}},[e._v(e._s(a.roleRealName))])})),1),t("a-button",{staticStyle:{"margin-left":"3%"},attrs:{type:"primary",disabled:1==a.roleId||2==a.roleId||6==a.roleId||7==a.roleId},on:{click:function(t){return e.goEdit(a.roleId)}}},[e._v("编辑")]),t("a-button",{staticStyle:{"margin-left":"3%"},attrs:{type:"primary"},on:{click:function(a){return e.goDelete(r)}}},[e._v("删除")])],1)}))],2)],1),t("user-role-doc",{ref:"userRoleDoc",on:{ok:e.handleOkDoc}}),t("user-role-fang",{ref:"userRoleFang",on:{ok:e.handleOkFang}})],1)},s=[],o=t("53ca"),i=(t("4de4"),t("d3b7"),t("ac1f"),t("1276"),t("159b"),t("a434"),t("7db0"),t("4cab")),l=t("65ab"),n=t("4c1c"),c={components:{userRoleDoc:l["default"],userRoleFang:n["default"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:11}},keshiData:[],isOpen:!0,visible:!1,confirmLoading:!1,form:this.$form.createForm(this),chooseDeptItem:{},keshiDataTemp:[],roles:[],roleList:[],record:{},docInfo:{avatarUrl:"",professionalTitle:"",expertInDisease:"",doctorBrief:""},caseManageIds:[]}},created:function(){var e=this;this.getDeptsOut(),Object(i["Bb"])(this.queryParam).then((function(a){0==a.code&&(e.roleList=a.data.filter((function(e){return 1!=e.roleId&&2!=e.roleId})))}))},methods:{edit:function(e){var a=this;this.record={},this.roles=[],this.record=e,this.docInfo={avatarUrl:e.avatarUrl,professionalTitle:e.professionalTitle,expertInDisease:e.expertInDisease,doctorBrief:e.doctorBrief},this.visible=!0,this.caseManageIds=this.record.caseManageIds,setTimeout((function(){a.form.setFieldsValue({loginName:a.record.loginName,password:"",userName:a.record.userName,roleId:a.record.roleId,identificationNo:a.record.identificationNo,phone:a.record.phone,departmentId:a.record.departmentId})}),100),this.isOpen=0==this.record.status,this.chooseDeptItem={departmentName:e.departmentName,departmentId:e.departmentId};var t=this.record.roleIds.split(",");t.forEach((function(e,t){a.roles.push({roleId:parseInt(e)})}))},addRole:function(){1!=this.roles.length?this.roles.push({}):this.$message.error("单个用户仅限添加一种角色")},onRoleSelect:function(e){this.goEdit(e)},goEdit:function(e){e?3==e||5==e?this.$refs.userRoleDoc.add(this.docInfo):4!=e&&8!=e||this.$refs.userRoleFang.add(this.caseManageIds):this.$message.error("请选择角色")},goDelete:function(e){this.roles.splice(e,1)},handleOkDoc:function(e){this.docInfo=e},handleOkFang:function(e){this.caseManageIds=e.caseManageIds},isPassword:function(e,a,t){var r=/(?!^[0-9]+$)(?!^[a-z]+$)(?!^[A-Z]+$)(?!^[^A-z0-9]+$)^[^\s\u4e00-\u9fa5]{8,}$/;a&&!r.test(a)&&t("提示：密码必须包含字母、数字或符号至少两种组合且密码长度不小于8位"),t()},isOpenChange:function(){this.isOpen=!this.isOpen},getDeptsOut:function(){var e=this;Object(i["eb"])().then((function(a){0==a.code&&(e.keshiData=a.data,e.keshiDataTemp=JSON.parse(JSON.stringify(e.keshiData)))}))},handleSearch:function(e){this.keshiDataTemp=e?this.keshiData.filter((function(a){return-1!=a.departmentName.indexOf(e)})):JSON.parse(JSON.stringify(this.keshiData))},onSelect:function(e){this.chooseDeptItem=JSON.parse(JSON.stringify(this.keshiData.find((function(a){return a.departmentId==e}))))},handleSubmit:function(){var e=this,a=this.form.validateFields;this.chooseDeptItem.departmentId?a((function(a,t){if(a)e.confirmLoading=!1;else{if(e.roles=e.roles.filter((function(e){return e.roleId})),0==e.roles.length||e.roles[0]=={})return void e.$message.error("请添加角色");var r="";e.roles.forEach((function(a,t){t!=e.roles.length-1?r=r+a.roleId+",":r+=a.roleId})),e.$set(t,"roleIds",r);for(var s=function(a){var t=JSON.parse(JSON.stringify(e.roles));t.splice(a,1);for(var r=0;r<t.length;r++)if(e.roles[a].roleId==t[r].roleId){var s=e.roleList.find((function(t){return t.roleId==e.roles[a].roleId}));return e.$message.error("角色【"+s.roleRealName+"】重复，相同角色只能有一个，请删除多余的！"),{v:void 0}}},l=0;l<e.roles.length;l++){var n=s(l);if("object"===Object(o["a"])(n))return n.v}e.$set(t,"avatarUrl",e.docInfo.avatarUrl?e.docInfo.avatarUrl:""),e.$set(t,"professionalTitle",e.docInfo.professionalTitle?e.docInfo.professionalTitle:""),e.$set(t,"expertInDisease",e.docInfo.expertInDisease?e.docInfo.expertInDisease:""),e.$set(t,"doctorBrief",e.docInfo.doctorBrief?e.docInfo.doctorBrief:""),e.$set(t,"caseManageIds",e.caseManageIds?e.caseManageIds:[]),e.$set(t,"departmentId",e.chooseDeptItem.departmentId),e.isOpen?e.$set(t,"status",0):e.$set(t,"status",1),t.accountId=e.record.accountId,t.userId=e.record.userId,Object(i["qd"])(t).then((function(a){a.success?(e.$message.success("编辑成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("编辑失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}})):this.$message.error("请选择所属部门")},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=c,u=t("2877"),p=Object(u["a"])(d,r,s,!1,null,null,null);a["default"]=p.exports}}]);
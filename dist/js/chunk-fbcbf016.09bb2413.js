(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fbcbf016"],{"221e":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAOCAYAAAArMezNAAABkklEQVQ4jY3UT4hPURQH8M9oakaaaYoiZbLyJ4spK2GhUdJMirCZBUWZnZXsjH/JgrKZlTILakaJ1Ch/CiOFnY0SoliIEmU7TXTGec2d936Gb73ue99zz/eed8/33rZtY7/8A33YjA1Yjg94jad435idaG8wc9iLY9jUiMzhHi7hwf8IR1Xj6C+4u5jAT6zGMNZjZz63cTDjs6hvxR5cw5KC24ebjeUZweni+xv2Yyo+FhWBI7hVEz2Qor24nntd4UxyFZbhMXaXFZ/CyVpFb7EWPfiCDqzA12LOSnxssaVDUfFoC9HA/RwPp2j1XqENn/Gmkcl4CK9p0H8wnWNXwZ3DHTzKJirmzUMI78DVRoTtOY7V+EFsxSd0Y10jk+NV88Iql2vBvhQPgS14iR+YxFLM4Cw6a3lHcaHc9OFszImCm0w/P8PGmsChFKkQC+1Kz8+zWyC8OZSVBRbjOS5m1eGSAdzAlSLvScZmRQN/uyuiYefzLxY69q+yoaWfFxSuEKaPZsUFtCoPz3e8wws8bJmF39ohT7otkqUYAAAAAElFTkSuQmCC"},"33d3":function(e,t,a){},b2f0:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a-card",{staticClass:"card-right-pac",attrs:{bordered:!1,confirmLoading:e.confirmLoading}},[s("div",{staticClass:"table-page-search-wrapper"},[s("a-form",{attrs:{layout:"inline"}},[s("a-row",{attrs:{gutter:48}},[s("a-col",{attrs:{md:4,sm:24}},[s("a-form-item",{attrs:{label:"姓名"}},[s("a-input",{attrs:{"allow-clear":"",placeholder:"请输入姓名"},on:{blur:function(t){return e.$refs.table.refresh(!0)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$refs.table.refresh(!0)},search:function(t){return e.$refs.table.refresh(!0)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1)],1),s("a-col",{attrs:{md:5,sm:24}},[s("a-form-item",{attrs:{label:"手机号"}},[s("a-input",{attrs:{"allow-clear":"",placeholder:"请输入手机号"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$refs.table.refresh(!0)},search:function(t){return e.$refs.table.refresh(!0)}},model:{value:e.queryParams.phone,callback:function(t){e.$set(e.queryParams,"phone",t)},expression:"queryParams.phone"}})],1)],1),s("a-col",{attrs:{md:6,sm:24}},[s("a-form-item",{attrs:{label:"执行科室"}},[s("a-select",{attrs:{"allow-clear":"",placeholder:"请选择科室"},model:{value:e.queryParams.executeDepartmentId,callback:function(t){e.$set(e.queryParams,"executeDepartmentId",t)},expression:"queryParams.executeDepartmentId"}},e._l(e.originData,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.departmentId}},[e._v(e._s(t.departmentName))])})),1)],1)],1),2==e.queryParams.queryStatus||3==e.queryParams.queryStatus||4==e.queryParams.queryStatus?s("a-col",{attrs:{md:5,sm:24}},[s("a-form-item",{attrs:{label:"随访方式"}},[s("a-select",{attrs:{"allow-clear":"",placeholder:"请选择随访方式"},model:{value:e.queryParams.messageType,callback:function(t){e.$set(e.queryParams,"messageType",t)},expression:"queryParams.messageType"}},e._l(e.msgData,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.value}},[e._v(e._s(t.description))])})),1)],1)],1):e._e()],1),s("a-row",{attrs:{gutter:48}},[2==e.queryParams.queryStatus||4==e.queryParams.queryStatus?s("a-col",{attrs:{md:5,sm:24}},[s("a-form-item",{attrs:{label:"是否逾期"}},[s("a-select",{attrs:{"allow-clear":"",placeholder:"请选择逾期状态"},model:{value:e.queryParams.overdueStatus,callback:function(t){e.$set(e.queryParams,"overdueStatus",t)},expression:"queryParams.overdueStatus"}},e._l(e.overdueData,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)],1)],1):e._e(),3==e.queryParams.queryStatus||4==e.queryParams.queryStatus?s("a-col",{attrs:{md:5,sm:24}},[s("a-form-item",{attrs:{label:"状态"}},[s("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态"},model:{value:e.queryParams.bizStatus,callback:function(t){e.$set(e.queryParams,"bizStatus",t)},expression:"queryParams.bizStatus"}},e._l(e.statusData,(function(t,a){return s("a-select-option",{key:a,attrs:{value:t.code}},[e._v(e._s(t.name))])})),1)],1)],1):e._e(),2==e.queryParams.queryStatus||3==e.queryParams.queryStatus||4==e.queryParams.queryStatus?s("a-col",{attrs:{md:7,sm:24}},[s("a-form-item",{attrs:{label:"执行日期"}},[s("a-range-picker",{attrs:{value:e.createValue},on:{change:e.onChange}})],1)],1):e._e(),s("a-col",{attrs:{md:4,sm:24}},[s("a-button",{attrs:{type:"primary",icon:"search"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),s("a-button",{staticStyle:{"margin-left":"10%"},attrs:{type:"primary",icon:"reload"},on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)],1),s("s-table",{ref:"table",staticStyle:{"margin-top":"15px","min-height":"500px"},attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.code}},scopedSlots:e._u([{key:"status-overdue",fn:function(t,a){return s("span",{class:e.getClass(a.overdueStatus)},[e._v(" "+e._s(a.overdueStatusName)+" ")])}},{key:"action",fn:function(t,i){return s("span",{},[3==e.queryParams.queryStatus&&1!=i.bizStatus||4==e.queryParams.queryStatus?s("div",{staticClass:"div-action",on:{click:function(t){return e.goLook(i)}}},[s("img",{attrs:{src:a("221e")}}),s("a",{staticStyle:{"margin-left":"5px"}},[e._v("查看")])]):s("div",{staticClass:"div-action",on:{click:function(t){return e.goSolve(i)}}},[s("img",{attrs:{src:a("b1ee")}}),s("a",{staticStyle:{"margin-left":"5px"}},[e._v("开始随访")])])])}}])}),s("a-drawer",{staticStyle:{display:"flex","flex-direction":"row"},attrs:{width:e.drawerWidth,mask:!1,"get-container":!1,closable:!1,visible:e.visible,"wrap-style":{position:"absolute"},"header-Style":{height:"100px"}},on:{close:e.onClose}},[s("div",{staticClass:"draw-wrap"},[s("div",{staticClass:"div-btn",on:{click:function(t){return e.goVise()}}},[e._v(e._s(e.btnText))]),s("div",{staticClass:"draw-bottom"},[s("div",{staticClass:"bottom-top"},[e._v(e._s(e.drawerTitle))]),s("div",{staticClass:"bottom-down"},e._l(e.treeData,(function(t,a){return s("div",{key:a,staticClass:"item-out",attrs:{value:t.key}},[s("div",{staticClass:"out-top"},[s("a-icon",{attrs:{type:t.outIcon},on:{click:function(s){return e.onHideAndSee(t,a)}}}),s("a-checkbox",{staticStyle:{"margin-left":"1%"},attrs:{checked:t.isChecked},on:{change:function(s){return e.onChangeOut(t,a)}}}),s("span",{staticStyle:{"margin-left":"1%"}},[e._v(e._s(t.title))])],1),e._l(e.treeData[a].children,(function(i,r){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.isVisible,expression:"itemOut.isVisible"}],key:r,staticClass:"out-list",attrs:{value:i.key}},[s("a-checkbox",{attrs:{checked:i.isChecked},on:{change:function(s){return e.onChangeIn(i,r,t,a)}}}),s("span",{staticStyle:{"margin-left":"1%"}},[e._v(e._s(i.title))])],1)}))],2)})),0)])])]),s("follow-Model",{ref:"followModel",on:{ok:e.handleOk}})],1)},i=[],r=(a("d3b7"),a("159b"),a("a4d3"),a("e01a"),a("a434"),a("2af9")),n=a("dc14"),l=a("9fb0"),o=a("2b0e"),d=a("4cab"),u={components:{STable:r["s"],followModel:n["default"]},data:function(){var e=this;return{isOpen:!0,childrenDrawer:!0,datas:[],drawerWidth:300,drawerTitle:"选择随访列表",btnText:"隐藏",expandedKeys:[1],autoExpandParent:!0,checkedKeys:[1],staticData:{},selectedKeys:[],overdueData:[{code:-1,name:"全部"},{code:1,name:"未逾期"},{code:2,name:"已逾期"}],statusData:[{code:-1,name:"全部"},{code:1,name:"未执行"},{code:2,name:"成功"},{code:3,name:"失败"}],treeData:[{key:1,title:"今日待随访",count:0,children:[]},{key:2,title:"全部待随访",count:8,children:[{key:37,parentKey:2,title:"问卷名称",count:8}]},{key:3,title:"逾期待随访",count:0,children:[]},{key:4,title:"已随访",count:45,children:[{key:37,parentKey:4,title:"问卷名称",count:15},{key:41,parentKey:4,title:"问卷名称",count:30}]}],keshiData:[],queryParams:{userName:null,phone:null,executeDepartmentId:null,messageType:null,overdueStatus:-1,bizStatus:-1,startDate:null,endDate:null,queryStatus:null,messageContentIds:null},queryParamsOrigin:{userName:null,phone:null,executeDepartmentId:null,messageType:null,overdueStatus:-1,bizStatus:-1,startDate:null,endDate:null,queryStatus:null,messageContentIds:null},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!0,clicked:!0,createValue:[],originData:[],user:{},msgData:[],confirmLoading:!1,form:this.$form.createForm(this),columns:[{title:"序号",dataIndex:"xh",width:60},{title:"姓名",dataIndex:"userName",width:80},{title:"年龄",dataIndex:"age",width:60},{title:"手机号码",dataIndex:"phone",width:80},{title:"计划时间",dataIndex:"execTime",width:100},{title:"随访方式",dataIndex:"messageTypeName",width:80},{title:"执行科室",dataIndex:"executeDepartmentName",width:90},{title:"随访方案",dataIndex:"followPlanName",width:80},{title:"随访内容",dataIndex:"followPlanContent",width:80},{title:"操作",width:80,dataIndex:"action",scopedSlots:{customRender:"action"}}],columnsNeed:[{title:"序号",dataIndex:"xh",width:60},{title:"姓名",dataIndex:"userName",width:80},{title:"年龄",dataIndex:"age",width:60},{title:"手机号码",dataIndex:"phone",width:80},{title:"计划时间",dataIndex:"execTime",width:100},{title:"随访方式",dataIndex:"messageTypeName",width:80},{title:"执行科室",dataIndex:"executeDepartmentName",width:80},{title:"随访方案",dataIndex:"followPlanName",width:80},{title:"随访内容",dataIndex:"followPlanContent",width:80},{title:"操作",width:80,dataIndex:"action",scopedSlots:{customRender:"action"}}],columnsAll:[{title:"序号",dataIndex:"xh",width:60},{title:"姓名",dataIndex:"userName",width:80},{title:"年龄",dataIndex:"age",width:60},{title:"手机号码",dataIndex:"phone",width:80},{title:"计划时间",dataIndex:"execTime",width:100},{title:"随访方式",dataIndex:"messageTypeName",width:80},{title:"执行科室",dataIndex:"executeDepartmentName",width:90},{title:"随访方案",dataIndex:"followPlanName",width:80},{title:"随访内容",dataIndex:"followPlanContent",width:80},{title:"是否逾期",scopedSlots:{customRender:"status-overdue"},width:80},{title:"操作",width:80,dataIndex:"action",scopedSlots:{customRender:"action"}}],columnsOverdue:[{title:"序号",dataIndex:"xh",width:60},{title:"姓名",dataIndex:"userName",width:80},{title:"年龄",dataIndex:"age",width:60},{title:"手机号码",dataIndex:"phone",width:80},{title:"计划时间",dataIndex:"execTime",width:100},{title:"随访方式",dataIndex:"messageTypeName",width:80},{title:"执行科室",dataIndex:"executeDepartmentName",width:90},{title:"随访方案",dataIndex:"followPlanName",width:80},{title:"随访内容",dataIndex:"followPlanContent",width:80},{title:"状态",dataIndex:"bizStatusName",width:80},{title:"操作",width:80,scopedSlots:{customRender:"action"},dataIndex:"action"}],columnsAready:[{title:"序号",dataIndex:"xh",width:60},{title:"姓名",dataIndex:"userName",width:80},{title:"年龄",dataIndex:"age",width:60},{title:"手机号码",dataIndex:"phone",width:80},{title:"执行日期",dataIndex:"execTime",width:100},{title:"随访方式",dataIndex:"messageTypeName",width:80},{title:"执行科室",dataIndex:"executeDepartmentName",width:90},{title:"随访方案",dataIndex:"followPlanName",width:80},{title:"随访内容",dataIndex:"followPlanContent",width:80},{title:"是否逾期",scopedSlots:{customRender:"status-overdue"},width:80},{title:"状态",dataIndex:"bizStatusName",width:80},{title:"操作",width:80,dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(t){var a=JSON.parse(JSON.stringify(e.queryParams));return a.messageType=parseInt(a.messageType),-1==a.overdueStatus&&(a.overdueStatus=null),-1==a.bizStatus&&(a.bizStatus=null),a.messageContentIds&&0!=a.messageContentIds.length||a.messageContentIds,1==a.queryStatus?(delete a.messageType,delete a.overdueStatus,delete a.bizStatus,delete a.startDate,delete a.endDate):2==a.queryStatus?delete a.bizStatus:3==a.queryStatus&&delete a.overdueStatus,e.confirmLoading=!0,Object(d["xc"])(Object.assign(t,a)).then((function(t){return e.confirmLoading=!1,0==t.code&&t.data.rows.forEach((function(a,s){e.$set(a,"xh",s+1+(t.data.pageNo-1)*t.data.pageSize),e.$set(a,"messageTypeName",a.messageType.description),1==a.overdueStatus.value?e.$set(a,"overdueStatusName","是"):e.$set(a,"overdueStatusName","否"),1==a.bizStatus.value?e.$set(a,"bizStatusName","未执行"):2==a.bizStatus.value?e.$set(a,"bizStatusName","成功"):3==a.bizStatus.value&&e.$set(a,"bizStatusName","失败")})),t.data}))}}},watch:{checkedKeys:function(e){}},created:function(){var e=this;this.user=o["a"].ls.get(l["p"]),this.getDeptsOut(),Object(d["yc"])().then((function(t){0==t.code&&(e.treeData=t.data,e.processData(!1))})),Object(d["dc"])().then((function(t){0==t.code&&(e.msgData=t.data)}))},methods:{onHideAndSee:function(e,t){e.isVisible=!e.isVisible,e.outIcon=e.isVisible?"caret-down":"caret-right"},onChangeOut:function(e,t){var a=this;e.isChecked=!0,e.isChecked&&(this.treeData.forEach((function(e,s){s!=t?(a.$set(e,"isChecked",!1),a.treeData[s].children.forEach((function(e,t){a.$set(e,"isChecked",!1)}))):(a.queryParams.queryStatus=e.key,a.queryParams.messageContentIds=[],a.$set(e,"isChecked",!0),a.treeData[s].children.forEach((function(e,t){a.$set(e,"isChecked",!0),a.queryParams.messageContentIds.push(e.key)})))})),1==this.queryParams.queryStatus?this.columns=JSON.parse(JSON.stringify(this.columnsNeed)):2==this.queryParams.queryStatus?this.columns=JSON.parse(JSON.stringify(this.columnsAll)):3==this.queryParams.queryStatus?this.columns=JSON.parse(JSON.stringify(this.columnsOverdue)):4==this.queryParams.queryStatus&&(this.columns=JSON.parse(JSON.stringify(this.columnsAready)))),this.$refs.table.refresh(!0)},onChangeIn:function(e,t,a,s){var i=this;if(e.isChecked=!e.isChecked,e.isChecked)this.queryParams.queryStatus!=a.key?(this.treeData.forEach((function(e,t){t!=s&&(i.$set(e,"isChecked",!1),i.treeData[t].children.forEach((function(e,t){i.$set(e,"isChecked",!1)})))})),this.queryParams.queryStatus=a.key,this.queryParams.messageContentIds=[],this.queryParams.messageContentIds.push(e.key)):(this.$set(e,"isChecked",!0),this.queryParams.messageContentIds.push(e.key));else{var r=0;a.children.forEach((function(e,a){t==a&&(r=a)})),this.queryParams.messageContentIds.splice(r,1)}1==this.queryParams.queryStatus?this.columns=JSON.parse(JSON.stringify(this.columnsNeed)):2==this.queryParams.queryStatus?this.columns=JSON.parse(JSON.stringify(this.columnsAll)):3==this.queryParams.queryStatus?this.columns=JSON.parse(JSON.stringify(this.columnsOverdue)):4==this.queryParams.queryStatus&&(this.columns=JSON.parse(JSON.stringify(this.columnsAready))),this.$refs.table.refresh(!0)},processData:function(e){for(var t=this,a=0;a<this.treeData.length;a++)e||(this.treeData[a].title=this.treeData[a].title+"（"+this.treeData[a].count+"）"),this.$set(this.treeData[a],"outIcon","caret-right"),this.$set(this.treeData[a],"isChecked",!1),this.$set(this.treeData[a],"isVisible",!1),this.treeData[a].children&&this.treeData[a].children.length>0&&this.treeData[a].children.forEach((function(a,s){t.$set(a,"isChecked",!1),e||t.$set(a,"title",a.title+"（"+a.count+"）")}));this.$set(this.treeData[0],"isChecked",!0),this.$set(this.treeData[0],"isVisible",!0),this.treeData[0].children&&this.treeData[0].children.length>0&&this.treeData[0].children.forEach((function(e,a){t.$set(e,"isChecked",!0)})),this.queryParams.queryStatus=this.treeData[0].key,this.queryParams.messageContentIds=[],this.treeData[0].children.forEach((function(e,a){t.queryParams.messageContentIds.push(e.key)})),this.$refs.table.refresh(!0)},getDeptsOut:function(){var e=this;7==this.user.roleId||"admin"==this.user.roleName?Object(d["gb"])().then((function(t){0==t.code&&(e.originData=t.data)})):Object(d["hb"])().then((function(t){0==t.code&&(e.originData=t.data)}))},getClass:function(e){return 1==e.value?"span-red":2==e.value?"span-gray":void 0},reset:function(){this.queryParams=JSON.parse(JSON.stringify(this.queryParamsOrigin)),this.processData(!0),this.createValue=[],this.$refs.table.refresh()},onChange:function(e,t){this.createValue=e,this.queryParams.startDate=t[0],this.queryParams.endDate=t[1]},goVise:function(){this.clicked=!this.clicked,this.drawerWidth=this.clicked?300:35,this.drawerTitle=this.clicked?"选择随访列表":"  ",this.btnText=this.clicked?"隐藏":"展开"},onClose:function(){this.visible=!1},goLook:function(e){this.$refs.followModel.doDeal(e)},goSolve:function(e){this.$refs.followModel.doDeal(e)},handleOk:function(){this.$refs.table.refresh()},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},c=u,h=(a("ed89"),a("2877")),m=Object(h["a"])(c,s,i,!1,null,null,null);t["default"]=m.exports},ed89:function(e,t,a){"use strict";a("33d3")}}]);
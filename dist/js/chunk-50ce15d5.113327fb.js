(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50ce15d5","chunk-e623f8ce","chunk-517fd7fc"],{"1da1":function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));t("d3b7");function r(e,a,t,r,s,i,o){try{var n=e[i](o),l=n.value}catch(c){return void t(c)}n.done?a(l):Promise.resolve(l).then(r,s)}function s(e){return function(){var a=this,t=arguments;return new Promise((function(s,i){var o=e.apply(a,t);function n(e){r(o,s,i,n,l,"next",e)}function l(e){r(o,s,i,n,l,"throw",e)}n(void 0)}))}}},"23ce":function(e,a,t){},"37cf":function(e,a,t){"use strict";t("8bcd")},"539a":function(e,a,t){},"6c14":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"div-yiji-todo"},[t("a-card",{staticClass:"card-right",attrs:{bordered:!1}},[t("a-radio-group",{staticStyle:{color:"white"},attrs:{"button-style":"solid"},on:{change:e.onClickChange},model:{value:e.tabFlag,callback:function(a){e.tabFlag=a},expression:"tabFlag"}},[t("a-radio-button",{attrs:{value:"1"}},[e._v("全部")]),t("a-radio-button",{attrs:{value:"2"}},[e._v("预约检查")]),t("a-radio-button",{attrs:{value:"3"}},[e._v("预约检验")])],1),t("div",{staticClass:"table-page-search-wrapper",staticStyle:{"margin-top":"1%"}},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"审核状态"}},[t("a-select",{attrs:{"allow-clear":"",placeholder:"请选择状态"},model:{value:e.queryParams.status,callback:function(a){e.$set(e.queryParams,"status",a)},expression:"queryParams.status"}},e._l(e.statusData,(function(a,r){return t("a-select-option",{key:r,attrs:{value:a.code}},[e._v(e._s(a.value))])})),1)],1)],1),t("a-col",{attrs:{md:7,sm:24}},[t("a-form-item",{attrs:{label:""}},[t("a-input-search",{attrs:{"allow-clear":"",placeholder:"请输入用户姓名"},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.$refs.table.refresh(!0)},search:function(a){return e.$refs.table.refresh(!0)}},model:{value:e.queryParams.userName,callback:function(a){e.$set(e.queryParams,"userName",a)},expression:"queryParams.userName"}})],1)],1),t("a-col",{attrs:{md:6,sm:24}},[t("a-form-item",{attrs:{label:"项目"}},[t("div",{staticClass:"div-text-auto"},[t("a-auto-complete",{staticClass:"global-search",staticStyle:{width:"100%","font-size":"14px"},attrs:{size:"large",placeholder:"请输入并选择","option-label-prop":"title"},on:{select:e.onSelect,search:e.handleSearch},model:{value:e.chooseDeptItem.name,callback:function(a){e.$set(e.chooseDeptItem,"name",a)},expression:"chooseDeptItem.name"}},[t("template",{slot:"dataSource"},e._l(e.keshiDataTemp,(function(a){return t("a-select-option",{key:a.id+"",attrs:{title:a.name}},[e._v(" "+e._s(a.name)+" ")])})),1)],2)],1)])],1),t("a-col",{attrs:{md:3,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:function(a){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),e._e()],1)],1)],1)],1),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.code}},scopedSlots:e._u([{key:"action",fn:function(a,r){return t("span",{},[t("a",{on:{click:function(a){return e.$refs.lookJian.edit(r)}}},[e._v("查看")]),t("a-divider",{attrs:{type:"vertical"}}),0==r.status?t("a",{on:{click:function(a){return e.$refs.editJian.edit(r)}}},[e._v("处理")]):e._e()],1)}}])}),t("look-jian",{ref:"lookJian",on:{ok:e.handleOk}}),t("edit-jian",{ref:"editJian",on:{ok:e.handleOk}})],1)],1)},s=[],i=(t("4de4"),t("d3b7"),t("b0c0"),t("7db0"),t("99af"),t("2af9")),o=t("4cab"),n=t("ff7b"),l=t("d815"),c={components:{STable:i["s"],lookJian:n["default"],editJian:l["default"]},data:function(){var e=this;return{tabFlag:"1",statusData:[{code:-1,value:"全部"},{code:0,value:"待审批"},{code:3,value:"预约成功"},{code:4,value:"预约失败"}],columns:[{title:"序号",dataIndex:"xh"},{title:"预约类型",dataIndex:"tradeTypeDetail"},{title:"就诊人",dataIndex:"userName"},{title:"项目",width:"300px",dataIndex:"appointItemName"},{title:"提交申请日期",dataIndex:"createTimeOut"},{title:"申请预约日期",dataIndex:"appointDate"},{title:"申请预约时间",dataIndex:"appointTime"},{title:"状态",dataIndex:"statusText"},{title:"预约时间",dataIndex:"reqTimeOut"},{title:"处理时间",dataIndex:"updateTimeOut"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(a){return-1==e.queryParams.status&&(e.queryParams.status=""),Object(o["Z"])(Object.assign(a,e.queryParams)).then((function(a){for(var t=0;t<a.data.rows.length;t++)e.$set(a.data.rows[t],"xh",t+1+(a.data.pageNo-1)*a.data.pageSize),"EXAM"==a.data.rows[t].appointItem?e.$set(a.data.rows[t],"tradeTypeDetail","预约检验"):"CHECK"==a.data.rows[t].appointItem&&e.$set(a.data.rows[t],"tradeTypeDetail","预约检查"),e.$set(a.data.rows[t],"createTimeOut",e.formatDateFull(a.data.rows[t].createTime)),3==a.data.rows[t].status||4==a.data.rows[t].status?e.$set(a.data.rows[t],"updateTimeOut",a.data.rows[t].updateTime?e.formatDateFull(a.data.rows[t].updateTime):""):e.$set(a.data.rows[t],"updateTimeOut",""),3==a.data.rows[t].status?e.$set(a.data.rows[t],"reqTimeOut",a.data.rows[t].dealResult):e.$set(a.data.rows[t],"reqTimeOut",""),0==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","待审批"):1==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","审核通过"):2==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","审核失败"):3==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","预约成功"):4==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","预约失败"):5==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","取消预约申请"):6==a.data.rows[t].status?e.$set(a.data.rows[t],"statusText","取消预约成功"):7==a.data.rows[t].status&&e.$set(a.data.rows[t],"statusText","取消预约失败");return a.data}))},queryParams:{tradeTypeCode:"lis",appointItem:"",userName:"",status:"",appointItemName:void 0},checkData:[],examData:[],chooseDeptItem:{},originData:[],keshiData:[],keshiDataTemp:[]}},created:function(){var e=this;Object(o["db"])({pageNo:1,type:"Check",pageSize:200}).then((function(a){0==a.code&&(e.checkData=a.data.rows,e.getCheckDataListExam())}))},methods:{onClickChange:function(e){"1"==e.target.value?(this.queryParams.appointItem="",this.queryParams.appointItemName="",this.queryParams.userName="",this.onDataChage(1)):"2"==e.target.value?(this.queryParams.appointItem="CHECK",this.queryParams.appointItemName="",this.queryParams.userName="",this.onDataChage(2)):(this.queryParams.appointItem="EXAM",this.queryParams.appointItemName="",this.queryParams.userName="",this.onDataChage(3)),this.chooseDeptItem={},this.$refs.table.refresh(!0)},handleSearch:function(e){e?this.keshiDataTemp=this.originData.filter((function(a){return-1!=a.name.indexOf(e)})):(this.keshiDataTemp=JSON.parse(JSON.stringify(this.originData)),this.queryParams.appointItemName="")},onSelect:function(e,a){this.chooseDeptItem=JSON.parse(JSON.stringify(this.originData.find((function(a){return a.id==e})))),this.queryParams.appointItemName=this.chooseDeptItem.name},getCheckDataListExam:function(){var e=this;Object(o["db"])({pageNo:1,type:"Exam",pageSize:200}).then((function(a){0==a.code&&(e.examData=a.data.rows,e.onDataChage(1))}))},onDataChage:function(e){1==e?(this.originData=JSON.parse(JSON.stringify(this.checkData)).concat(JSON.parse(JSON.stringify(this.examData))),this.keshiData=JSON.parse(JSON.stringify(this.checkData)).concat(JSON.parse(JSON.stringify(this.examData))),this.keshiDataTemp=JSON.parse(JSON.stringify(this.checkData)).concat(JSON.parse(JSON.stringify(this.examData)))):2==e?(this.originData=JSON.parse(JSON.stringify(this.checkData)),this.keshiData=JSON.parse(JSON.stringify(this.checkData)),this.keshiDataTemp=JSON.parse(JSON.stringify(this.checkData))):3==e&&(this.originData=JSON.parse(JSON.stringify(this.examData)),this.keshiData=JSON.parse(JSON.stringify(this.examData)),this.keshiDataTemp=JSON.parse(JSON.stringify(this.examData)))},formatDate:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,r=e.getDate();return t<10&&(t="0"+t),r<10&&(r="0"+r),"".concat(a,"-").concat(t,"-").concat(r)},formatDateFull:function(e){e=new Date(e);var a=e.getFullYear(),t=e.getMonth()+1,r=e.getDate(),s=e.getHours(),i=e.getMinutes(),o=e.getSeconds();return t<10&&(t="0"+t),r<10&&(r="0"+r),s<10&&(s="0"+s),i<10&&(i="0"+i),o<10&&(o="0"+o),"".concat(a,"-").concat(t,"-").concat(r," ").concat(s,":").concat(i,":").concat(o)},handleOk:function(){this.$refs.table.refresh()}}},d=c,u=(t("ebaa"),t("2877")),h=Object(u["a"])(d,r,s,!1,null,null,null);a["default"]=h.exports},"79f9":function(e,a,t){"use strict";t("23ce")},"8bcd":function(e,a,t){},d815:function(e,a,t){"use strict";t.r(a);var r,s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.editTitle,width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"就诊人",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.userName))])]),t("a-form-item",{attrs:{label:"预约检查项",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.appointItemName))])]),t("a-form-item",{attrs:{label:"期望预约时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticStyle:{"margin-top":"6%"}},[e._v("日期 : "+e._s(e.record.appointDate))]),t("div",[e._v("时间段 : "+e._s(e.record.appointTime))])]),t("a-form-item",{attrs:{label:"检验申请单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[e.hasPic?t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,headers:e.headers,multiple:!0,"list-type":"picture-card","file-list":e.fileListBanner},on:{preview:e.handlePreviewBanner,change:e.handleChangeBanner}},[e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleBanner,footer:null},on:{cancel:e.handleCancelBanner}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageBanner}})])],1):t("span",{staticStyle:{color:"#333"}},[e._v("无")])]),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticStyle:{"font-weight":"bold","margin-left":"20%",color:"#333"}},[e._v("预约反馈:")])]),t("a-form-item",{attrs:{label:"预约状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-radio-group",{attrs:{name:"radioGroup","default-value":1},model:{value:e.radioValue,callback:function(a){e.radioValue=a},expression:"radioValue"}},[t("a-radio",{attrs:{value:1}},[e._v(" 成功 ")]),t("a-radio",{staticStyle:{width:"100px"},attrs:{value:2}},[e._v(" 失败 ")])],1)],1),1==e.radioValue?t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticStyle:{"margin-left":"20%",color:"#333"}},[e._v("预约时间 :")])]):e._e(),1==e.radioValue?t("a-form-item",{attrs:{label:"日期",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-date-picker",{attrs:{"disabled-date":e.disabledDate,placeholder:"2021-12-31 "},model:{value:e.chooseDate,callback:function(a){e.chooseDate=a},expression:"chooseDate"}})],1):e._e(),1==e.radioValue?t("a-form-item",{attrs:{label:"时间段",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},e._l(e.timeData,(function(a,r){return t("span",{key:r,staticClass:"span-time",class:{chose:a.isChecked},staticStyle:{"margin-left":"0"},on:{click:function(a){return e.onPartChoose(r)}}},[e._v(e._s(a.value))])})),0):e._e(),1==e.radioValue?t("a-form-item",{attrs:{labelCol:e.labelCol,label:e.locationDes,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{attrs:{placeholder:"请输入地点"},model:{value:e.remark,callback:function(a){e.remark=a},expression:"remark"}})],1):e._e(),2==e.radioValue?t("a-form-item",{attrs:{label:"失败原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{attrs:{placeholder:"请输入失败原因"},model:{value:e.failReason,callback:function(a){e.failReason=a},expression:"failReason"}})],1):e._e()],1)],1)],1)},i=[],o=t("ade3"),n=t("1da1"),l=(t("96cf"),t("7db0"),t("d3b7"),t("ac1f"),t("1276"),t("4cab")),c=t("c1df"),d=t.n(c),u=t("9fb0"),h=t("2b0e"),m=t("ca00"),p={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},statusData:[],visible:!1,record:{},confirmLoading:!1,form:this.$form.createForm(this),chooseDate:"",editTitle:"ddd",actionUrl:"/api/content-api/fileUpload/uploadImgFile",fileListBanner:[],previewImageBanner:"",previewVisibleBanner:!1,remark:"",hasPic:!1,radioValue:1,locationDes:"",failReason:"",timeData:[],choseTimeItem:{},headers:{Authorization:""}}},created:function(){var e=this;this.headers.Authorization=h["a"].ls.get(u["a"]),Object(l["oc"])("APPOINT_TYPE").then((function(a){if(0==a.code&&a.data&&a.data.length>0){for(var t=0;t<a.data.length;t++)0==t?e.$set(a.data[t],"isChecked",!0):e.$set(a.data[t],"isChecked",!1);e.timeData=a.data,e.choseTimeItem=JSON.parse(JSON.stringify(e.timeData[0]))}}))},methods:(r={edit:function(e){this.visible=!0,this.record={},this.fileListBanner=[],this.record=e,"CHECK"==this.record.appointItem?this.locationDes="检查地点":"EXAM"==this.record.tradeType&&(this.locationDes="检验地点"),this.editTitle=e.tradeType;var a=this.record.tradeAppointLog.find((function(e){return"REQUEST"==e.dealType}));if(a&&a.dealImages&&a.dealImages.length>0){this.hasPic=!0;for(var t=a.dealImages.split(","),r=0;r<t.length;r++)this.fileListBanner.push({uid:0-r+"",name:"Banner"+r,status:"done",url:t[r]})}else this.hasPic=!1},disabledDate:function(e){return e&&e<d()().endOf("day")},handleCancel:function(){},onPartChoose:function(e){for(var a=0;a<this.timeData.length;a++)this.$set(this.timeData[a],"isChecked",!1),a==e&&(this.$set(this.timeData[a],"isChecked",!0),this.choseTimeItem=JSON.parse(JSON.stringify(this.timeData[a])))},handleSubmit:function(){var e=this;this.form.validateFields;if(1==this.radioValue){if(!this.chooseDate)return void this.$message.error("请选择预约日期！");if(!this.choseTimeItem)return void this.$message.error("请选择预约时段！");if(this.$set(this.record,"dealResult",Object(m["c"])(this.chooseDate)+" "+this.choseTimeItem.value),!this.remark)return void this.$message.error("请输入地点！");this.$set(this.record,"remark",this.remark),this.record.status=3}else{if(!this.failReason)return void this.$message.error("请填写失败原因！");this.record.status=4,this.$set(this.record,"dealResult",this.failReason)}this.confirmLoading=!0,Object(l["gd"])(this.record).then((function(a){a.success?(e.$message.success("审批成功,系统将为患者发送预约结果短信通知"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok"),e.form.resetFields()):e.$message.error("审批失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}},Object(o["a"])(r,"handleCancel",(function(){this.form.resetFields(),this.visible=!1})),Object(o["a"])(r,"handlePreviewBanner",(function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageBanner=e.url||e.preview,a.previewVisibleBanner=!0;case 6:case"end":return t.stop()}}),t)})))()})),Object(o["a"])(r,"handleChangeBanner",(function(e){var a=e.fileList;this.fileListBanner=a})),Object(o["a"])(r,"handleCancelBanner",(function(){this.previewVisibleBanner=!1})),Object(o["a"])(r,"getBase64",(function(e){return new Promise((function(a,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return a(r.result)},r.onerror=function(e){return t(e)}}))})),r)},f=p,b=(t("79f9"),t("2877")),v=Object(b["a"])(f,s,i,!1,null,null,null);a["default"]=v.exports},ebaa:function(e,a,t){"use strict";t("539a")},ff7b:function(e,a,t){"use strict";t.r(a);var r,s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:e.editTitle,width:900,footer:null,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"就诊人",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.userName))])]),t("a-form-item",{attrs:{label:"预约检查项",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.appointItemName))])]),t("a-form-item",{attrs:{label:"期望预约时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("div",{staticStyle:{"margin-top":"6%"}},[e._v("日期 : "+e._s(e.record.appointDate))]),t("div",[e._v("时间段 : "+e._s(e.record.appointTime))])]),t("a-form-item",{attrs:{label:"检验申请单",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[e.hasPic?t("div",{staticClass:"clearfix",staticStyle:{"margin-top":"20px"}},[t("a-upload",{attrs:{disabled:"",action:e.actionUrl,multiple:!0,"list-type":"picture-card","file-list":e.fileListBanner},on:{preview:e.handlePreviewBanner,change:e.handleChangeBanner}},[e._e()]),t("a-modal",{attrs:{visible:e.previewVisibleBanner,footer:null},on:{cancel:e.handleCancelBanner}},[t("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImageBanner}})])],1):t("span",{staticStyle:{color:"#333"}},[e._v("无")])]),t("a-form-item",{attrs:{label:"",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",{staticStyle:{"font-weight":"bold","margin-left":"20%",color:"#333"}},[e._v("预约反馈:")])]),t("a-form-item",{attrs:{label:"预约状态",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s("已申请"==e.record.statusText?"待审批":e.record.statusText))])]),3==e.record.status?t("a-form-item",{attrs:{label:"预约时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.dealResult))])]):e._e(),4==e.record.status?t("a-form-item",{attrs:{label:"失败原因",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.dealResult))])]):e._e(),3==e.record.status||4==e.record.status?t("a-form-item",{attrs:{label:"处理时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("span",[e._v(e._s(e.record.updateTimeOut))])]):e._e()],1)],1)],1)},i=[],o=t("ade3"),n=t("1da1"),l=(t("96cf"),t("7db0"),t("d3b7"),t("ac1f"),t("1276"),t("4cab")),c=t("ca00"),d={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},statusData:[],visible:!1,record:{},confirmLoading:!1,form:this.$form.createForm(this),chooseDate:"",editTitle:"ddd",actionUrl:"/api/conten-tapi/fileUpload/uploadImgFile",fileListBanner:[],previewImageBanner:"",previewVisibleBanner:!1,remark:"",hasPic:!1,radioValue:1,locationDes:"",failReason:"",timeData:[],choseTimeItem:{}}},created:function(){var e=this;Object(l["oc"])("APPOINT_TYPE").then((function(a){if(0==a.code&&a.data&&a.data.length>0){for(var t=0;t<a.data.length;t++)0==t?e.$set(a.data[t],"isChecked",!0):e.$set(a.data[t],"isChecked",!1);e.timeData=a.data,e.choseTimeItem=JSON.parse(JSON.stringify(e.timeData[0]))}}))},methods:(r={edit:function(e){this.visible=!0,this.record={},this.fileListBanner=[],this.record=e,"CHECK"==this.record.appointItem?this.locationDes="检查地点":"EXAM"==this.record.tradeType&&(this.locationDes="检验地点"),this.editTitle=e.tradeType;var a=this.record.tradeAppointLog.find((function(e){return"REQUEST"==e.dealType}));if(a&&a.dealImages&&a.dealImages.length>0){this.hasPic=!0;for(var t=a.dealImages.split(","),r=0;r<t.length;r++)this.fileListBanner.push({uid:0-r+"",name:"Banner"+r,status:"done",url:t[r]})}else this.hasPic=!1},handleCancel:function(){},onPartChoose:function(e){for(var a=0;a<this.timeData.length;a++)this.$set(this.timeData[a],"isChecked",!1),a==e&&(this.$set(this.timeData[a],"isChecked",!0),this.choseTimeItem=JSON.parse(JSON.stringify(this.timeData[a])))},handleSubmit:function(){var e=this;this.form.validateFields;if(1==this.radioValue){if(!this.chooseDate)return void this.$message.error("请选择预约日期！");if(this.record.appointDate=Object(c["c"])(this.chooseDate),!this.choseTimeItem)return void this.$message.error("请选择预约时段！");if(this.$set(this.record,"appointTime",this.choseTimeItem.value),!this.remark)return void this.$message.error("请输入地点！");this.$set(this.record,"remark",this.remark),this.record.status=3}else{if(!this.failReason)return void this.$message.error("请填写失败原因！");this.record.status=4,this.$set(this.record,"dealResult",this.failReason)}this.confirmLoading=!0,Object(l["gd"])(this.record).then((function(a){a.success?(e.$message.success("审批成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok"),e.form.resetFields()):e.$message.error("审批失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}},Object(o["a"])(r,"handleCancel",(function(){this.form.resetFields(),this.visible=!1})),Object(o["a"])(r,"handlePreviewBanner",(function(e){var a=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,a.getBase64(e.originFileObj);case 3:e.preview=t.sent;case 4:a.previewImageBanner=e.url||e.preview,a.previewVisibleBanner=!0;case 6:case"end":return t.stop()}}),t)})))()})),Object(o["a"])(r,"handleChangeBanner",(function(e){var a=e.fileList;this.fileListBanner=a})),Object(o["a"])(r,"handleCancelBanner",(function(){this.previewVisibleBanner=!1})),Object(o["a"])(r,"getBase64",(function(e){return new Promise((function(a,t){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return a(r.result)},r.onerror=function(e){return t(e)}}))})),r)},u=d,h=(t("37cf"),t("2877")),m=Object(h["a"])(u,s,i,!1,null,null,null);a["default"]=m.exports}}]);
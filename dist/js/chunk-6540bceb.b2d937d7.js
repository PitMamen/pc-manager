(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6540bceb"],{"7cfb":function(e,r,a){"use strict";a.r(r);var t=function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("a-modal",{attrs:{title:"添加",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"图片名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,max:80,message:"请输入图片名称！"}]}],expression:"['name', { rules: [{ required: true, max: 80, message: '请输入图片名称！' }] }]"}],attrs:{placeholder:"输入图片名称，最多80个字"}})],1),a("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,max:50,message:"请输入标题！"}]}],expression:"['title', { rules: [{ required: true, max: 50, message: '请输入标题！' }] }]"}],attrs:{placeholder:"输入标题，最多50个字"}})],1),a("a-form-item",{attrs:{label:"链接url",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl",{rules:[{required:!0,message:"请输入链接！"}]}],expression:"['linkUrl', { rules: [{ required: true, message: '请输入链接！' }] }]"}],attrs:{placeholder:"输入正确的连接URL，请以https或http开头"}})],1),a("a-form-item",{attrs:{label:"摘要",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["brief"],expression:"['brief']"}],attrs:{rows:4,placeholder:"不能超过200个字"}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl"],expression:"['linkUrl']"}],staticStyle:{display:"none"}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileId"],expression:"['previewFileId']"}],staticStyle:{display:"none"}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileName"],expression:"['previewFileName']"}],staticStyle:{display:"none"}})],1),a("a-form-item",{attrs:{label:"上传图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("div",{key:e.ImgKey},[a("a-upload",{attrs:{name:"file",multiple:!1,action:e.actionUrl,headers:e.headers},on:{change:e.handleChange}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileId",{rules:[{required:!0,message:"请上传图片！"}]}],expression:"['fileId', { rules: [{ required: true, message: '请上传图片！' }] }]"}],staticStyle:{display:"none"}}),a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" 选择文件 ")],1)],1)],1)])],1)],1)],1)},n=[],i=(a("d3b7"),a("e791")),o=a("9fb0"),l=a("2b0e"),s={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,ImgKey:"",actionUrl:"/api/content-api/fileUpload/uploadImgFile",confirmLoading:!1,form:this.$form.createForm(this),headers:{Authorization:""}}},watch:{visible:function(){this.visible?this.ImgKey="":this.ImgKey=Math.random()}},created:function(){this.headers.Authorization=l["a"].ls.get(o["a"])},methods:{handleChange:function(e){if(null!=e.file.response){var r=e.file.response;r.success&&(this.form.setFieldsValue({fileId:r.data.fileLinkUrl}),this.form.setFieldsValue({previewFileId:r.data.previewFileId}),this.form.setFieldsValue({previewFileName:r.data.previewFileId}))}},add:function(e){this.visible=!0},handleSubmit:function(){var e=this,r=this.form.validateFields;this.confirmLoading=!0,r((function(r,a){r?e.confirmLoading=!1:Object(i["a"])(a).then((function(r){r.success?(e.$message.success("新增成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",a),e.form.resetFields()):e.$message.error("新增失败："+r.message)})).finally((function(r){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=s,u=a("2877"),c=Object(u["a"])(d,t,n,!1,null,null,null);r["default"]=c.exports},e791:function(e,r,a){"use strict";a.d(r,"e",(function(){return n})),a.d(r,"a",(function(){return i})),a.d(r,"c",(function(){return o})),a.d(r,"h",(function(){return l})),a.d(r,"g",(function(){return s})),a.d(r,"f",(function(){return d})),a.d(r,"b",(function(){return u})),a.d(r,"d",(function(){return c}));var t=a("b775");function n(e){var r=e.pageNo,a=e.pageSize;return Object(t["b"])({url:"/banner/qryBanner?start="+r+"&pageSize="+a,method:"get",data:{}})}function i(e){return Object(t["b"])({url:"/banner/saveBanner",method:"post",data:e})}function o(e){return Object(t["b"])({url:"/banner/saveBanner",method:"post",data:e})}function l(e){var r={};return r.id=e.id,r.isVisible=!e.isVisible,Object(t["b"])({url:"/banner/saveBanner",method:"post",data:r})}function s(e){var r={};return r.id=e.id,r.sortIndex=e.sortIndex+1,Object(t["b"])({url:"/banner/saveBanner",method:"post",data:r})}function d(e){var r={};return r.id=e.id,r.sortIndex=e.sortIndex-1,Object(t["b"])({url:"/banner/saveBanner",method:"post",data:r})}function u(e){return Object(t["b"])({url:"/banner/delBanner?id="+e.id,method:"get",data:e})}function c(e){return Object(t["b"])({url:"/banner/delBanners",method:"post",data:e})}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4985520a"],{b3676:function(e,a,r){"use strict";r.r(a);var t=function(){var e=this,a=e.$createElement,r=e._self._c||a;return r("a-modal",{attrs:{title:"修改",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-form",{attrs:{form:e.form}},[r("a-form-item",{staticStyle:{display:"none"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),r("a-form-item",{attrs:{label:"图片名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileName"],expression:"['fileName']"}],attrs:{placeholder:"输入图片名称，最多80个字"}})],1),r("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],attrs:{placeholder:"输入标题，最多50个字"}})],1),r("a-form-item",{attrs:{label:"链接url",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl"],expression:"['linkUrl']"}],attrs:{placeholder:"输入正确的连接URL，请以https或http开头"}})],1),r("a-form-item",{attrs:{label:"摘要",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["brief"],expression:"['brief']"}],attrs:{rows:4,placeholder:"不能超过200个字"}}),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileId"],expression:"['fileId']"}],staticStyle:{display:"none"}}),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileName"],expression:"['fileName']"}],staticStyle:{display:"none"}}),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl"],expression:"['linkUrl']"}],staticStyle:{display:"none"}}),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileId"],expression:"['previewFileId']"}],staticStyle:{display:"none"}}),r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileName"],expression:"['previewFileName']"}],staticStyle:{display:"none"}})],1),r("a-form-item",{attrs:{label:"上传图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[r("a-upload",{attrs:{name:"file",multiple:!1,action:e.actionUrl,headers:e.headers},on:{change:e.handleChange}},[r("a-button",[r("a-icon",{attrs:{type:"upload"}}),e._v(" 选择文件 ")],1)],1)],1)],1)],1)],1)},i=[],n=(r("d3b7"),r("e791")),l=r("9fb0"),o=r("2b0e"),s={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,actionUrl:"/api/content-api/fileUpload/uploadImgFile",confirmLoading:!1,form:this.$form.createForm(this),headers:{Authorization:""}}},created:function(){this.headers.Authorization=o["a"].ls.get(l["a"])},methods:{handleChange:function(e){if(null!=e.file.response){var a=e.file.response;a.success&&(this.form.setFieldsValue({fileId:a.data.id}),this.form.setFieldsValue({fileName:a.data.id}),this.form.setFieldsValue({linkUrl:a.data.fileLinkUrl}),this.form.setFieldsValue({previewFileId:a.data.previewFileId}),this.form.setFieldsValue({previewFileName:a.data.previewFileId}))}},edit:function(e){var a=this;this.visible=!0,setTimeout((function(){a.form.setFieldsValue({id:e.id,fileName:e.fileName,title:e.title,linkUrl:e.linkUrl,brief:e.brief})}),100)},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,r){a?e.confirmLoading=!1:Object(n["c"])(r).then((function(a){a.success?(e.$message.success("修改成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",r),e.form.resetFields()):e.$message.error("修改失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=s,c=r("2877"),u=Object(c["a"])(d,t,i,!1,null,null,null);a["default"]=u.exports},e791:function(e,a,r){"use strict";r.d(a,"e",(function(){return i})),r.d(a,"a",(function(){return n})),r.d(a,"c",(function(){return l})),r.d(a,"h",(function(){return o})),r.d(a,"g",(function(){return s})),r.d(a,"f",(function(){return d})),r.d(a,"b",(function(){return c})),r.d(a,"d",(function(){return u}));var t=r("b775");function i(e){var a=e.pageNo,r=e.pageSize;return Object(t["b"])({url:"/banner/qryBanner?start="+a+"&pageSize="+r,method:"get",data:{}})}function n(e){return Object(t["b"])({url:"/banner/saveBanner",method:"post",data:e})}function l(e){return Object(t["b"])({url:"/banner/saveBanner",method:"post",data:e})}function o(e){var a={};return a.id=e.id,a.isVisible=!e.isVisible,Object(t["b"])({url:"/banner/saveBanner",method:"post",data:a})}function s(e){var a={};return a.id=e.id,a.sortIndex=e.sortIndex+1,Object(t["b"])({url:"/banner/saveBanner",method:"post",data:a})}function d(e){var a={};return a.id=e.id,a.sortIndex=e.sortIndex-1,Object(t["b"])({url:"/banner/saveBanner",method:"post",data:a})}function c(e){return Object(t["b"])({url:"/banner/delBanner?id="+e.id,method:"get",data:e})}function u(e){return Object(t["b"])({url:"/banner/delBanners",method:"post",data:e})}}}]);
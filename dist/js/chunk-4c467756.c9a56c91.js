(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c467756"],{"822a":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("a-modal",{attrs:{title:e.title,width:1e3,height:650,visible:e.visible,confirmLoading:!1},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[i("a-card",{staticClass:"card-top-pac",attrs:{bordered:!1}},[i("div",{staticClass:"table-page-wrapper",staticStyle:{"margin-top":"-2%"}},[i("div",{staticClass:"div-line-wrap"},[i("span",{staticClass:"span-item-name"},[i("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 名单描述 :")]),i("a-input",{staticClass:"span-item-value",staticStyle:{display:"inline-block",width:"20%","margin-left":"2%"},attrs:{maxLength:30,"allow-clear":"",placeholder:"请输入内容"},on:{blur:function(t){return e.focus(e.record)}},model:{value:e.metaName,callback:function(t){e.metaName=t},expression:"metaName"}}),i("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"10%"}},[i("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 数据库表 :")]),i("a-input",{staticClass:"span-item-value",staticStyle:{display:"inline-block",width:"20%","margin-left":"2%"},attrs:{disabled:"",maxLength:30,"allow-clear":""},model:{value:e.record.databaseTableName,callback:function(t){e.$set(e.record,"databaseTableName",t)},expression:"record.databaseTableName"}}),i("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"10%"}},[i("span",{staticStyle:{color:"red"}},[e._v("*")]),e._v(" 状态 :")]),i("a-switch",{staticStyle:{"margin-left":"1%"},attrs:{checked:e.isOpen},on:{click:e.Enable}})],1)]),i("a-table",{ref:"table",staticStyle:{"margin-top":"2%","overflow-y":"auto",height:"500px"},attrs:{size:"default",scroll:{y:400,x:0},pagination:!1,"data-source":e.loadData,columns:e.columns,alert:!0,rowKey:function(e){return e.code}},scopedSlots:e._u([{key:"show",fn:function(t,a){return i("span",{},[i("a-checkbox",{on:{change:function(t){return e.shwoChange(a)}},model:{value:a.show,callback:function(t){e.$set(a,"show",t)},expression:"record.show"}})],1)}},{key:"index",fn:function(t,a){return i("span",{},[i("a-checkbox",{on:{change:function(t){return e.isOnlyIndex(a)}},model:{value:a.wysy,callback:function(t){e.$set(a,"wysy",t)},expression:"record.wysy"}})],1)}},{key:"eleDes",fn:function(t,a){return i("span",{},[null!=a.defaultField&&2==a.defaultField.value?i("a-input",{staticClass:"span-item-value",staticStyle:{display:"inline-block",width:"120px","margin-right":"1%"},attrs:{maxLength:30,"allow-clear":""},on:{blur:function(t){return e.changeDes(a)}},model:{value:a.fieldComment,callback:function(t){e.$set(a,"fieldComment",t)},expression:"record.fieldComment"}}):e._e(),null!=a.defaultField&&1==a.defaultField.value?i("span",[e._v(e._s(null!=a.fieldComment?a.fieldComment:""))]):e._e()],1)}},{key:"fileDes",fn:function(t,a){return i("span",{staticStyle:{display:"inline-block"}},[null!=a.defaultField&&2==a.defaultField.value?i("a-select",{staticStyle:{width:"110px","margin-right":"1%"},on:{select:function(t){return e.selectDes(a)}},model:{value:a.fieldArchives.description,callback:function(t){e.$set(a.fieldArchives,"description",t)},expression:"record.fieldArchives.description"}},e._l(e.dazdList,(function(t,a){return i("a-select-option",{key:a,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1):e._e(),null!=a.defaultField&&1==a.defaultField.value?i("span",[e._v(e._s(null!=a.fieldArchives?a.fieldArchives.description:""))]):e._e()],1)}}])})],1)],1)},s=[],n=(i("4de4"),i("d3b7"),i("159b"),i("a4d3"),i("e01a"),i("4cab")),l=i("2af9"),d={components:{STable:l["s"]},data:function(){return{clickTtime:(new Date).getTime(),loadData:[],id:"",isOpen:!1,record:{},metaName:"",queryParams:{databaseTableName:"",metaName:""},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,detailList:[],confirmLoading:!1,form:this.$form.createForm(this),title:"编辑名单",dazdList:[{code:0,value:"无"},{code:1,value:"紧急联系人"},{code:2,value:"紧急电话"},{code:3,value:"微信OpenID"}],columns:[{title:"字段编码",dataIndex:"zdbm"},{title:"字段描述",scopedSlots:{customRender:"eleDes"}},{title:"字段类型",dataIndex:"zdlx",width:100},{title:"字段大小",dataIndex:"fieldLength",width:100},{title:"默认值",dataIndex:"fieldDefaultValue",width:90},{title:"档案字段",scopedSlots:{customRender:"fileDes"}},{title:"显示",dataIndex:"show",scopedSlots:{customRender:"show"},width:90},{title:"唯一索引",dataIndex:"index",scopedSlots:{customRender:"index"},width:90}]}},methods:{check:function(e){var t=this;this.visible=!0,this.record=e,this.metaName=e.metaName,this.id=e.id,this.isOpen=1==e.status.value,this.queryParams.databaseTableName=e.databaseTableName,Object(n["l"])(this.queryParams).then((function(e){if(0==e.code&&e.data.length>0){var i=e.data[0];i.detail=i.detail.filter((function(e){return"id"!=e.tableField})),i.detail.forEach((function(e,i){t.$set(e,"zdbm",e.tableField),t.$set(e,"zdlx",null!=e.fieldType?e.fieldType.description:""),null==e.fieldArchives&&t.$set(e,"fieldArchives",{description:""}),t.$set(e,"show",null!=e.showStatus&&1==e.showStatus.value),t.$set(e,"wysy",null!=e.uniqueIndexStatus&&1==e.uniqueIndexStatus.value)})),t.detailList=i.detail,t.loadData=i.detail}else t.detailList=null,t.loadData=null;return[]}))},focus:function(e){var t={id:e.id,metaName:this.metaName};this.updateMetaConfigure(t)},changeDes:function(e){this.id,e.id,e.fieldComment},selectDes:function(e){},updateMetaConfigure:function(e){var t=this;this.confirmLoading=!0,Object(n["nd"])(e).then((function(e){e.success?t.$emit("ok"):t.$message.error("编辑失败："+e.message),t.confirmLoading=!1})).finally((function(e){t.confirmLoading=!1}))},saveMetaConfigure:function(e){var t=this;this.confirmLoading=!0,Object(n["Oc"])(e).then((function(e){e.success?(t.visible=!1,t.$emit("ok")):t.$message.error("修改失败："+e.message),t.confirmLoading=!1})).finally((function(e){t.confirmLoading=!1}))},shwoChange:function(e){1==e.showStatus.value?this.isShow=!0:this.isShow=!1},isOnlyIndex:function(e){1==e.uniqueIndexStatus.value?this.onlyIndex=!0:this.onlyIndex=!1},Enable:function(){this.isOpen=!this.isOpen,this.isOpen?this.queryParams.status=1:this.queryParams.status=2;var e={id:this.id,status:this.isOpen?1:2};this.updateMetaConfigure(e)},handleCancel:function(){this.form.resetFields(),this.visible=!1},handleSubmit:function(){var e=JSON.parse(JSON.stringify(this.detailList));e.forEach((function(e){e.defaultField=null!=e.defaultField?e.defaultField.value:2,e.id=e.id,e.fieldComment=e.fieldComment;var t=0;null!=e.fieldArchives?("紧急联系人"===e.fieldArchives.description||1==e.fieldArchives.description?t=1:"紧急电话"===e.fieldArchives.description||2==e.fieldArchives.description?t=2:"无"!==e.fieldArchives.description&&0!=e.fieldArchives.description||(t=0),e.fieldArchives=null!=e.fieldArchives?t:""):e.fieldArchives=null!=e.fieldArchives?e.fieldArchives.description:"",e.fieldType=null!=e.fieldType?e.fieldType.value:"",e.showStatus=e.show?1:2,e.uniqueIndexStatus=e.wysy?1:2}));var t={id:this.id,detail:e};this.repeatclickFun()?this.saveMetaConfigure(t):this.$message.error("请勿重复操作!")},repeatclickFun:function(){var e=Date.now()-this.clickTtime;return this.clickTtime=Date.now(),!(e>0&&e<=500)}}},c=d,o=(i("b3b1"),i("2877")),r=Object(o["a"])(c,a,s,!1,null,null,null);t["default"]=r.exports},b3b1:function(e,t,i){"use strict";i("d6cf")},d6cf:function(e,t,i){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4a7e8cd5","chunk-2d0b346e","chunk-2d0c073e","chunk-2d0e59e0","chunk-2d0a4f13","chunk-2d0a3134","chunk-2d0b9c16"],{"0141":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"输入文字提醒",width:900,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入提醒内容 "},model:{value:t.remindContent,callback:function(e){t.remindContent=e},expression:"remindContent"}})],1)},s=[],i={components:{},data:function(){return{remindContent:"",index:-1,confirmLoading:!1,visible:!1}},methods:{add:function(t){this.visible=!0,this.index=t},handleSubmit:function(){this.remindContent?(this.$emit("ok",this.index,this.remindContent),this.visible=!1):this.$message.error("请输入提醒内容")},handleCancel:function(){this.remindContent="",this.visible=!1}}},l=i,o=a("2877"),d=Object(o["a"])(l,n,s,!1,null,null,null);e["default"]=d.exports},"091e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择健康问卷",width:900,visible:t.visible,confirmLoading:t.confirmLoading,footer:""},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData,alert:!0,rowKey:function(t){return t.code}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.pick(n)}}},[t._v("选择")])])}}])})],1)],1)},s=[],i=(a("d3b7"),a("159b"),a("b0c0"),a("4cab")),l=a("2af9"),o={components:{STable:l["s"]},data:function(){var t=this;return{queryParam:{yljgdm:"444885559"},columns:[{title:"序号",dataIndex:"xh"},{title:"名称",dataIndex:"name"},{title:"说明",dataIndex:"nameDes"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(i["V"])(Object.assign(e,t.queryParam)).then((function(t){var a={pageNo:e.pageNo,pageSize:e.pageSize,totalRows:t.data.total,totalPage:t.data.total/e.pageSize,rows:t.data.list};return a.rows.forEach((function(t,e){t.xh=(a.pageNo-1)*a.pageSize+(e+1),t.nameDes=t.name})),a}))},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},type:"",index:-1,form:this.$form.createForm(this),confirmLoading:!1,visible:!1}},methods:{add:function(t){this.visible=!0,this.index=t},pick:function(t){this.$emit("ok",this.index,t),this.visible=!1},handleSubmit:function(){this.$emit("ok",this.index,this.type),this.visible=!1},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=o,r=a("2877"),c=Object(r["a"])(d,n,s,!1,null,null,null);e["default"]=c.exports},"284f":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择计划类型",width:900,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"计划类型",labelCol:t.labelCol,wrapperCol:t.wrapperCol,"has-feedback":""}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择计划类型"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeData,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.taskType}},[t._v(t._s(e.value))])})),1)],1),"Rdiagnosis"==t.type||"Ddiagnosis"==t.type?a("a-form-item",{attrs:{label:"提醒内容",labelCol:t.labelCol,wrapperCol:t.wrapperCol,"has-feedback":""}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入提醒内容"},model:{value:t.remindContent,callback:function(e){t.remindContent=e},expression:"remindContent"}})],1):t._e()],1)],1)],1)},s=[],i=(a("d3b7"),a("159b"),a("4cab")),l={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},type:"",index:-1,typeData:[{taskType:"Knowledge",value:"健康宣教"},{taskType:"Quest",value:"健康问卷"},{taskType:"Check",value:"检查"},{taskType:"Exam",value:"检验"}],form:this.$form.createForm(this),confirmLoading:!1,visible:!1,remindContent:""}},methods:{add:function(t){this.type="",this.index=t,this.visible=!0,this.index=t,this.remindContent="";var e=this;Object(i["wb"])().then((function(t){0==t.code&&(t.data.forEach((function(t){e.$set(t,"value",t.taskValue),delete t.taskValue})),e.typeData=t.data)}))},handleSubmit:function(){var t,e=this;this.type?(this.typeData.forEach((function(a){e.type==a.taskType&&(t=a)})),"Rdiagnosis"!=this.type&&"Ddiagnosis"!=this.type||this.remindContent?(this.$set(t,"remindContent",this.remindContent),this.$emit("ok",this.index,t),this.visible=!1):this.$message.error("请填写提醒内容")):this.$message.error("请选择计划类型")},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},o=l,d=a("2877"),r=Object(d["a"])(o,n,s,!1,null,null,null);e["default"]=r.exports},"33ff":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择健康宣教",width:900,visible:t.visible,confirmLoading:t.confirmLoading,footer:""},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData,alert:!0,rowKey:function(t){return t.code}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.pick(n)}}},[t._v("选择")])])}}])})],1)],1)},s=[],i=(a("d3b7"),a("159b"),a("4cab")),l=a("2af9"),o={components:{STable:l["s"]},data:function(){var t=this;return{queryParam:{deptCode:""},columns:[{title:"序号",dataIndex:"xh"},{title:"名称",dataIndex:"title"},{title:"说明",dataIndex:"brief"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(i["T"])(Object.assign(e,t.queryParam)).then((function(t){var a={pageNo:e.pageNo,pageSize:e.pageSize,totalRows:t.data.total,totalPage:t.data.total/e.pageSize,rows:t.data.list};return a.rows.forEach((function(t,e){t.xh=(a.pageNo-1)*a.pageSize+(e+1)})),a}))},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},type:"",index:-1,form:this.$form.createForm(this),confirmLoading:!1,visible:!1}},methods:{add:function(t,e){this.visible=!0,this.queryParam.deptCode=e,this.index=t,this.$refs.table.refresh()},pick:function(t){this.$emit("ok",this.index,t),this.visible=!1},handleSubmit:function(){this.$emit("ok",this.index,this.type),this.visible=!1},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=o,r=a("2877"),c=Object(r["a"])(d,n,s,!1,null,null,null);e["default"]=c.exports},"3af1":function(t,e,a){},"429c":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择检查",width:900,visible:t.visible,confirmLoading:t.confirmLoading,footer:""},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData,alert:!0,rowKey:function(t){return t.code}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.pick(n)}}},[t._v("选择")])])}}])})],1)],1)},s=[],i=(a("b0c0"),a("4cab")),l=a("2af9"),o={components:{STable:l["s"]},data:function(){var t=this;return{queryParam:{type:"Check"},columns:[{title:"序号",dataIndex:"xh"},{title:"名称",dataIndex:"name"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(i["bb"])(Object.assign(e,t.queryParam)).then((function(e){for(var a=0;a<e.data.rows.length;a++)t.$set(e.data.rows[a],"xh",a+1+(e.data.pageNo-1)*e.data.pageSize),t.$set(e.data.rows[a],"nameDes",e.data.rows[a].name);return e.data}))},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},index:-1,form:this.$form.createForm(this),confirmLoading:!1,visible:!1}},methods:{add:function(t){this.visible=!0,this.index=t},pick:function(t){this.$emit("ok",this.index,t),this.visible=!1},handleSubmit:function(){this.$emit("ok",this.index,this.type),this.visible=!1},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=o,r=a("2877"),c=Object(r["a"])(d,n,s,!1,null,null,null);e["default"]=c.exports},"94f5":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:"选择检验",width:900,visible:t.visible,confirmLoading:t.confirmLoading,footer:""},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("s-table",{ref:"table",attrs:{size:"default",columns:t.columns,data:t.loadData,alert:!0,rowKey:function(t){return t.code}},scopedSlots:t._u([{key:"action",fn:function(e,n){return a("span",{},[a("a",{on:{click:function(e){return t.pick(n)}}},[t._v("选择")])])}}])})],1)],1)},s=[],i=(a("b0c0"),a("4cab")),l=a("2af9"),o={components:{STable:l["s"]},data:function(){var t=this;return{queryParam:{type:"Exam"},columns:[{title:"序号",dataIndex:"xh"},{title:"名称",dataIndex:"name"},{title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}}],loadData:function(e){return Object(i["bb"])(Object.assign(e,t.queryParam)).then((function(e){for(var a=0;a<e.data.rows.length;a++)t.$set(e.data.rows[a],"xh",a+1+(e.data.pageNo-1)*e.data.pageSize),t.$set(e.data.rows[a],"nameDes",e.data.rows[a].name);return e.data}))},labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},index:-1,form:this.$form.createForm(this),confirmLoading:!1,visible:!1}},methods:{add:function(t){this.visible=!0,this.index=t},pick:function(t){this.$emit("ok",this.index,t),this.visible=!1},handleSubmit:function(){this.$emit("ok",this.index,this.type),this.visible=!1},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},d=o,r=a("2877"),c=Object(r["a"])(d,n,s,!1,null,null,null);e["default"]=c.exports},bff7:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div-new-plan"},[a("p",{staticClass:"p-title"},[t._v("修改计划")]),a("div",{staticClass:"div-divider"}),a("div",{staticClass:"div-line-wrap"},[t._m(0),a("a-input",{staticClass:"span-item-value",staticStyle:{display:"inline-block"},attrs:{maxLength:30,"allow-clear":"",placeholder:"请输入计划名称 "},model:{value:t.planData.templateName,callback:function(e){t.$set(t.planData,"templateName",e)},expression:"planData.templateName"}})],1),a("div",{staticClass:"div-line-wrap"},[t._m(1),a("div",{staticStyle:{width:"300px",display:"inline-block","margin-left":"1%"}},[a("a-auto-complete",{staticClass:"global-search",staticStyle:{width:"100%","font-size":"14px"},attrs:{size:"large",placeholder:"请输入并选择","option-label-prop":"title"},on:{select:t.onSelect,search:t.handleSearch},model:{value:t.chooseDeptItem.departmentName,callback:function(e){t.$set(t.chooseDeptItem,"departmentName",e)},expression:"chooseDeptItem.departmentName"}},[a("template",{slot:"dataSource"},t._l(t.keshiDataTemp,(function(e){return a("a-select-option",{key:e.departmentId+"",attrs:{title:e.departmentName}},[t._v(" "+t._s(e.departmentName)+" ")])})),1)],2)],1),t._m(2),a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择入所属科室"},model:{value:t.planData.disease[0].diseaseName,callback:function(e){t.$set(t.planData.disease[0],"diseaseName",e)},expression:"planData.disease[0].diseaseName"}},t._l(t.diseaseData,(function(e,n){return a("a-select-option",{key:n,attrs:{value:e.diseaseName}},[t._v(t._s(e.diseaseName))])})),1)],1),t._m(3),a("div",{staticClass:"div-health-plan"},t._l(t.planData.templateTask,(function(e,n){return a("div",{key:n,staticClass:"div-plan-item"},[t._m(4,!0),a("a-input",{staticStyle:{width:"12.5%","margin-left":"5%"},attrs:{type:"number","allow-clear":"",placeholder:"请输入天数 "},model:{value:t.planData.templateTask[n].inputDay,callback:function(e){t.$set(t.planData.templateTask[n],"inputDay",e)},expression:"planData.templateTask[index].inputDay"}}),a("span",{staticClass:"span-des"},[t._v("天后")]),a("div",{staticClass:"div-top-right"},[a("a-popconfirm",{attrs:{title:"确定删除任务吗？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.deletePlanItem(n)}}},[a("a-button",{staticClass:"span-add-item",attrs:{type:"primary"}},[t._v("删除任务")])],1),a("a-button",{staticClass:"span-add-item",attrs:{type:"primary"},on:{click:function(e){return t.$refs.addForm.add(n)}}},[t._v("添加子计划")])],1),a("div",{staticClass:"div-divider"}),t._l(t.planData.templateTask[n].templateTaskContent,(function(e,s){return a("div",{key:s,staticClass:"div-plan-item-elements"},[a("div",{staticClass:"div-element"},[a("div",{staticClass:"div-content"},[a("span",{staticClass:"span-item-name"},[t._v(" 计划类型 :")]),a("span",{staticClass:"span-item-content"},[t._v(" "+t._s(e.taskTypeName))])]),a("div",{staticClass:"div-content-value"},[a("span",{staticClass:"span-item-name"},[t._v(" 具体内容 :")]),a("span",{staticClass:"span-item-content"},[t._v(" "+t._s(e.contentDetail.detailName))])]),a("a-popconfirm",{attrs:{title:"确定删除任务吗？","ok-text":"确定","cancel-text":"取消"},on:{confirm:function(e){return t.deleteElement(n,s)}}},[a("a-icon",{staticClass:"icon-delete",attrs:{title:"删除任务项目",type:"close"}})],1),a("div",{staticClass:"div-divider-elements"})],1)])}))],2)})),0),a("a-button",{staticClass:"btn-add-plan",attrs:{type:"primary"},on:{click:t.addPlanItem}},[t._v("添加具体计划")]),a("a-button",{staticClass:"btn-save-plan",attrs:{type:"primary"},on:{click:t.savePlan}},[t._v("保存计划")]),a("add-form",{ref:"addForm",on:{ok:t.handleOk}}),a("add-teach",{ref:"addTeach",on:{ok:t.handleTeach}}),a("add-question",{ref:"addQuestion",on:{ok:t.handleQuestion}}),a("add-remind",{ref:"addRemind",on:{ok:t.handleRemind}}),a("add-cha",{ref:"addJianCha",on:{ok:t.handleJianCha}}),a("add-yan",{ref:"addJianYan",on:{ok:t.handleJianYan}})],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"span-item-name"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 计划名称 :")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"span-item-name"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 所属科室 :")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"span-item-name",staticStyle:{"margin-left":"3%"}},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 所属专病 :")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"div-line-wrap"},[a("span",{staticClass:"span-item-name"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 计划内容 :")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"span-item-name"},[a("span",{staticStyle:{color:"red"}},[t._v("*")]),t._v(" 计划时间 :")])}],i=(a("4de4"),a("d3b7"),a("7db0"),a("159b"),a("a434"),a("b0c0"),a("4cab")),l=a("284f"),o=a("33ff"),d=a("429c"),r=a("94f5"),c=a("091e"),p=a("0141"),m={components:{addForm:l["default"],addTeach:o["default"],addCha:d["default"],addYan:r["default"],addQuestion:c["default"],addRemind:p["default"]},data:function(){return{planData:{basetimeType:"0",templateName:"",goodsInfo:{belong:"",goodsName:"",goodsType:"plan_package"},disease:[{diseaseName:""}],templateTask:[{timeCount:"1",timeUnit:"天",inputDay:"",templateTaskContent:[]}]},timeCountData:[],timeUnitData:[{code:"1",value:"天"},{code:"2",value:"周"},{code:"3",value:"月"}],keshiData:[],diseaseData:[],planId:"",chooseDeptItem:{},keshiDataTemp:[]}},created:function(){var t=this;this.planId=this.$route.query.planId,this.getPlanDetailOut(),Object(i["eb"])().then((function(e){0==e.code&&(t.keshiData=e.data,t.keshiDataTemp=JSON.parse(JSON.stringify(t.keshiData)))}));for(var e=0;e<30;e++)this.timeCountData.push({code:e+1,value:e+1})},methods:{handleSearch:function(t){this.keshiDataTemp=t?this.keshiData.filter((function(e){return-1!=e.departmentName.indexOf(t)})):JSON.parse(JSON.stringify(this.keshiData))},onSelect:function(t){this.planData.goodsInfo.belong=t,this.chooseDeptItem=JSON.parse(JSON.stringify(this.keshiData.find((function(e){return e.departmentId==t})))),this.planData.disease[0].diseaseName="",this.getDiseasesOut(t)},getDiseasesOut:function(t){var e=this;Object(i["ib"])({departmentId:t}).then((function(t){0==t.code?e.diseaseData=t.data:e.$message.error("获取专病列表失败："+t.message)}))},getPlanDetailOut:function(){var t=this;Object(i["vb"])(this.planId).then((function(e){if(0==e.code){t.planData=e.data,t.chooseDeptItem={departmentName:t.planData.goodsInfo.belong,departmentId:t.planData.goodsInfo.deptName},t.keshiData.forEach((function(e){t.planData.goodsInfo.belong==e.departmentId&&(t.planData.goodsInfo.belongName=e.departmentName)})),t.getDiseasesOut(t.planData.goodsInfo.belong);for(var a=0;a<t.planData.templateTask.length;a++){t.$set(t.planData.templateTask[a],"inputDay",t.planData.templateTask[a].execTime);for(var n=0;n<t.planData.templateTask[a].templateTaskContent.length;n++){var s=t.planData.templateTask[a].templateTaskContent[n].taskType;"Knowledge"==s?(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","健康宣教"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.title)):"Quest"==s?(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","健康问卷"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.questName)):"Remind"==s?(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","文字提醒"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.remindContent)):"Check"==s?(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","检查"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.checkType)):"Exam"==s?(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","检验"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.examType)):"Rdiagnosis"==s?(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","复诊提醒"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.remindContent)):"Ddiagnosis"==s&&(t.$set(t.planData.templateTask[a].templateTaskContent[n],"taskTypeName","用药提醒"),t.$set(t.planData.templateTask[a].templateTaskContent[n].contentDetail,"detailName",t.planData.templateTask[a].templateTaskContent[n].contentDetail.remindContent))}}}else t.$message.error(e.message)}))},addPlanItem:function(){this.planData.templateTask.push({timeCount:"1",timeUnit:"天",inputDay:"",templateTaskContent:[]})},deletePlanItem:function(t){var e=this;if(this.planData.templateTask[t].taskId){var a={templateId:this.planData.templateId,taskId:this.planData.templateTask[t].taskId};Object(i["D"])(a).then((function(a){0==a.code?e.planData.templateTask.splice(t,1):e.$message.error("删除失败："+a.message)}))}else this.planData.templateTask.splice(t,1)},deleteElement:function(t,e){var a=this;if(this.planData.templateTask[t].templateTaskContent[e].id){var n={templateId:this.planData.templateId,taskId:this.planData.templateTask[t].taskId,id:this.planData.templateTask[t].templateTaskContent[e].id};Object(i["E"])(n).then((function(n){0==n.code?(a.$message.success("删除成功"),a.planData.templateTask[t].templateTaskContent.splice(e,1)):a.$message.error("删除失败："+n.message)}))}else this.planData.templateTask[t].templateTaskContent.splice(e,1)},handleOk:function(t,e){switch(e.taskType){case"Knowledge":this.$refs.addTeach.add(t,this.planData.goodsInfo.belong);break;case"Quest":this.$refs.addQuestion.add(t);break;case"Remind":this.$refs.addRemind.add(t);break;case"Check":this.$refs.addJianCha.add(t);break;case"Exam":this.$refs.addJianYan.add(t);break;case"Rdiagnosis":this.handleRdiagnosis(t,e.remindContent);break;case"Ddiagnosis":this.handleDdiagnosis(t,e.remindContent);break}},handleTeach:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Knowledge",taskTypeName:"健康宣教",taskDescribe:e.title,contentDetail:{knowUrl:e.previewUrl,knowContent:e.title,detailName:e.title,articleId:e.articleId}})},handleQuestion:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Quest",taskTypeName:"健康问卷",taskDescribe:e.name,contentDetail:{questId:e.key,questName:e.name,detailName:e.name}})},handleRemind:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Remind",taskTypeName:"文字提醒",taskDescribe:e,contentDetail:{remindContent:e,detailName:e}})},handleRdiagnosis:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Rdiagnosis",taskTypeName:"复诊提醒",taskDescribe:e,contentDetail:{remindContent:e,detailName:e}})},handleDdiagnosis:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Ddiagnosis",taskTypeName:"用药提醒",taskDescribe:e,contentDetail:{remindContent:e,detailName:e}})},handleJianCha:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Check",taskTypeName:"检查",taskDescribe:e.name,contentDetail:{checkType:e.name,detailName:e.name}})},handleJianYan:function(t,e){this.planData.templateTask[t].templateTaskContent.push({taskType:"Exam",taskTypeName:"检验",taskDescribe:e.name,contentDetail:{examType:e.name,detailName:e.name}})},savePlan:function(){var t=this;if(this.planData.templateName)if(this.planData.goodsInfo.belong)if(this.planData.disease[0].diseaseName)if(0!=this.planData.templateTask.length)if(this.planData.templateTask.length>30)this.$message.error("最多只能添加30个任务！");else{this.planData.goodsInfo.goodsName=this.planData.templateName;for(var e=0;e<this.planData.templateTask.length;e++)this.planData.templateTask[e].execTime=this.planData.templateTask[e].inputDay;for(var a=0,n=0;n<this.planData.templateTask.length;n++)a+=this.planData.templateTask[n].templateTaskContent.length;if(0!=a){for(var s=[],l=0;l<this.planData.templateTask.length;l++)0!=this.planData.templateTask[l].templateTaskContent.length&&s.push(this.planData.templateTask[l]);this.planData.templateTask=s,Object(i["Tc"])(this.planData).then((function(e){0==e.code?(t.$message.success("保存成功"),t.$router.go(-1)):t.$message.error(e.message)}))}else this.$message.error("请添加至少一个任务项目")}else this.$message.error("请添加至少一个计划任务");else this.$message.error("请输入所属专病");else this.$message.error("请选择所属科室");else this.$message.error("请填写计划名称")}}},h=m,u=(a("d4c0"),a("2877")),f=Object(u["a"])(h,n,s,!1,null,null,null);e["default"]=f.exports},d4c0:function(t,e,a){"use strict";a("3af1")}}]);
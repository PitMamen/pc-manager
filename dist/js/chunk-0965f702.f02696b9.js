(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0965f702","chunk-6540bceb","chunk-4985520a"],{"13be":function(e,a,t){},"549c":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-card",{attrs:{bordered:!1}},[t("div",{staticClass:"table-operator"},[t("a-button",{attrs:{type:"primary",icon:""},on:{click:function(a){return e.$refs.addForm.add()}}},[e._v("新增")]),t("a-button",{attrs:{type:"primary",icon:""},on:{click:function(a){return e.batchDelete()}}},[e._v("删除")])],1),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"action",fn:function(a,r){return t("span",{},[t("a",{on:{click:function(a){return e.setHidden(r)}}},[r.isVisible?t("span",[e._v("隐藏")]):e._e(),r.isVisible?e._e():t("span",[e._v("显示")])]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(a){return e.moveUp(r)}}},[e._v("上移")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(a){return e.moveDown(r)}}},[e._v("下移")]),t("a-divider",{attrs:{type:"vertical"}}),t("a",{on:{click:function(a){return e.$refs.editForm.edit(r)}}},[e._v("修改")]),t("a-divider",{attrs:{type:"vertical"}}),t("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.bannerDelete(r)}}},[t("a",[e._v("删除")])])],1)}},{key:"photoFlag",fn:function(e,a){return t("span",{},[t("img",{attrs:{src:a.fileId,width:"100",height:"100"}})])}},{key:"visibleFlag",fn:function(a,r){return t("span",{},[r.isVisible?t("span",[e._v("是")]):e._e(),r.isVisible?e._e():t("span",[e._v("否")])])}}])}),t("add-form",{ref:"addForm",on:{ok:e.handleOk}}),t("edit-form",{ref:"editForm",on:{ok:e.handleOk}})],1)},i=[],s=t("2af9"),n=t("e791"),o=t("7cfb"),l=t("b3676"),c={components:{STable:s["s"],addForm:o["default"],editForm:l["default"]},data:function(){var e=this;return{queryParam:{},columns:[{title:"图片",dataIndex:"name",scopedSlots:{customRender:"photoFlag"}},{title:"名称",dataIndex:"fileName"},{title:"连接url",dataIndex:"linkUrl"},{title:"是否可见",dataIndex:"isVisible",scopedSlots:{customRender:"visibleFlag"}}],tableDatas:{},loadData:function(a){return Object(n["e"])(Object.assign(a,e.queryParam)).then((function(a){return e.tableDatas=a.data,a.data}))},selectedRowKeys:[],selectedRows:[]}},created:function(){this.columns.push({title:"操作",width:"300px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{batchDelete:function(){var e=this,a=this.selectedRowKeys;Object(n["d"])(a).then((function(a){a.success?(e.$message.success("删除成功"),e.$refs.table.refresh()):e.$message.error("删除失败："+a.message)})).catch((function(a){e.$message.error("删除错误："+a.message)}))},bannerDelete:function(e){var a=this;Object(n["b"])(e).then((function(e){e.success?(a.$message.success("删除成功"),a.$refs.table.refresh()):a.$message.error("删除失败："+e.message)})).catch((function(e){a.$message.error("删除错误："+e.message)}))},setHidden:function(e){var a=this;Object(n["h"])(e).then((function(e){e.success?(a.$message.success("操作成功"),a.$refs.table.refresh()):a.$message.error("操作失败："+e.message)})).catch((function(e){a.$message.error("操作错误："+e.message)}))},moveUp:function(e){var a=this;0!=this.tableDatas.rows.indexOf(e)?Object(n["g"])(e).then((function(e){e.success?(a.$message.success("上移成功"),a.$refs.table.refresh()):a.$message.error("上移失败："+e.message)})).catch((function(e){a.$message.error("上移错误："+e.message)})):this.$message.error("第一条不能上移")},moveDown:function(e){var a=this;this.tableDatas.rows.indexOf(e)!=this.tableDatas.rows.length-1?Object(n["f"])(e).then((function(e){e.success?(a.$message.success("下移成功"),a.$refs.table.refresh()):a.$message.error("下移失败："+e.message)})).catch((function(e){a.$message.error("下移错误："+e.message)})):this.$message.error("最后一条不能下移")},handleOk:function(){this.$refs.table.refresh()},onSelectChange:function(e,a){this.selectedRowKeys=e,this.selectedRows=a}}},d=c,u=(t("effc"),t("2877")),m=Object(u["a"])(d,r,i,!1,null,null,null);a["default"]=m.exports},"7cfb":function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"添加",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"图片名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,max:80,message:"请输入图片名称！"}]}],expression:"['name', { rules: [{ required: true, max: 80, message: '请输入图片名称！' }] }]"}],attrs:{placeholder:"输入图片名称，最多80个字"}})],1),t("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,max:50,message:"请输入标题！"}]}],expression:"['title', { rules: [{ required: true, max: 50, message: '请输入标题！' }] }]"}],attrs:{placeholder:"输入标题，最多50个字"}})],1),t("a-form-item",{attrs:{label:"链接url",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl",{rules:[{required:!0,message:"请输入链接！"}]}],expression:"['linkUrl', { rules: [{ required: true, message: '请输入链接！' }] }]"}],attrs:{placeholder:"输入正确的连接URL，请以https或http开头"}})],1),t("a-form-item",{attrs:{label:"摘要",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["brief"],expression:"['brief']"}],attrs:{rows:4,placeholder:"不能超过200个字"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl"],expression:"['linkUrl']"}],staticStyle:{display:"none"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileId"],expression:"['previewFileId']"}],staticStyle:{display:"none"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileName"],expression:"['previewFileName']"}],staticStyle:{display:"none"}})],1),t("a-form-item",{attrs:{label:"上传图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("div",{key:e.ImgKey},[t("a-upload",{attrs:{name:"file",multiple:!1,action:e.actionUrl,headers:e.headers},on:{change:e.handleChange}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileId",{rules:[{required:!0,message:"请上传图片！"}]}],expression:"['fileId', { rules: [{ required: true, message: '请上传图片！' }] }]"}],staticStyle:{display:"none"}}),t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(" 选择文件 ")],1)],1)],1)])],1)],1)],1)},i=[],s=(t("d3b7"),t("e791")),n=t("9fb0"),o=t("2b0e"),l={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,ImgKey:"",actionUrl:"/api/content-api/fileUpload/uploadImgFile",confirmLoading:!1,form:this.$form.createForm(this),headers:{Authorization:""}}},watch:{visible:function(){this.visible?this.ImgKey="":this.ImgKey=Math.random()}},created:function(){this.headers.Authorization=o["a"].ls.get(n["a"])},methods:{handleChange:function(e){if(null!=e.file.response){var a=e.file.response;a.success&&(this.form.setFieldsValue({fileId:a.data.fileLinkUrl}),this.form.setFieldsValue({previewFileId:a.data.previewFileId}),this.form.setFieldsValue({previewFileName:a.data.previewFileId}))}},add:function(e){this.visible=!0},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){a?e.confirmLoading=!1:Object(s["a"])(t).then((function(a){a.success?(e.$message.success("新增成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("新增失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},c=l,d=t("2877"),u=Object(d["a"])(c,r,i,!1,null,null,null);a["default"]=u.exports},b3676:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("a-modal",{attrs:{title:"修改",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.confirmLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{staticStyle:{display:"none"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-form-item",{attrs:{label:"图片名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileName"],expression:"['fileName']"}],attrs:{placeholder:"输入图片名称，最多80个字"}})],1),t("a-form-item",{attrs:{label:"标题",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title"],expression:"['title']"}],attrs:{placeholder:"输入标题，最多50个字"}})],1),t("a-form-item",{attrs:{label:"链接url",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl"],expression:"['linkUrl']"}],attrs:{placeholder:"输入正确的连接URL，请以https或http开头"}})],1),t("a-form-item",{attrs:{label:"摘要",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["brief"],expression:"['brief']"}],attrs:{rows:4,placeholder:"不能超过200个字"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileId"],expression:"['fileId']"}],staticStyle:{display:"none"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fileName"],expression:"['fileName']"}],staticStyle:{display:"none"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["linkUrl"],expression:"['linkUrl']"}],staticStyle:{display:"none"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileId"],expression:"['previewFileId']"}],staticStyle:{display:"none"}}),t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["previewFileName"],expression:"['previewFileName']"}],staticStyle:{display:"none"}})],1),t("a-form-item",{attrs:{label:"上传图片",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-upload",{attrs:{name:"file",multiple:!1,action:e.actionUrl,headers:e.headers},on:{change:e.handleChange}},[t("a-button",[t("a-icon",{attrs:{type:"upload"}}),e._v(" 选择文件 ")],1)],1)],1)],1)],1)],1)},i=[],s=(t("d3b7"),t("e791")),n=t("9fb0"),o=t("2b0e"),l={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,actionUrl:"/api/content-api/fileUpload/uploadImgFile",confirmLoading:!1,form:this.$form.createForm(this),headers:{Authorization:""}}},created:function(){this.headers.Authorization=o["a"].ls.get(n["a"])},methods:{handleChange:function(e){if(null!=e.file.response){var a=e.file.response;a.success&&(this.form.setFieldsValue({fileId:a.data.id}),this.form.setFieldsValue({fileName:a.data.id}),this.form.setFieldsValue({linkUrl:a.data.fileLinkUrl}),this.form.setFieldsValue({previewFileId:a.data.previewFileId}),this.form.setFieldsValue({previewFileName:a.data.previewFileId}))}},edit:function(e){var a=this;this.visible=!0,setTimeout((function(){a.form.setFieldsValue({id:e.id,fileName:e.fileName,title:e.title,linkUrl:e.linkUrl,brief:e.brief})}),100)},handleSubmit:function(){var e=this,a=this.form.validateFields;this.confirmLoading=!0,a((function(a,t){a?e.confirmLoading=!1:Object(s["c"])(t).then((function(a){a.success?(e.$message.success("修改成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("修改失败："+a.message)})).finally((function(a){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},c=l,d=t("2877"),u=Object(d["a"])(c,r,i,!1,null,null,null);a["default"]=u.exports},e791:function(e,a,t){"use strict";t.d(a,"e",(function(){return i})),t.d(a,"a",(function(){return s})),t.d(a,"c",(function(){return n})),t.d(a,"h",(function(){return o})),t.d(a,"g",(function(){return l})),t.d(a,"f",(function(){return c})),t.d(a,"b",(function(){return d})),t.d(a,"d",(function(){return u}));var r=t("b775");function i(e){var a=e.pageNo,t=e.pageSize;return Object(r["b"])({url:"/banner/qryBanner?start="+a+"&pageSize="+t,method:"get",data:{}})}function s(e){return Object(r["b"])({url:"/banner/saveBanner",method:"post",data:e})}function n(e){return Object(r["b"])({url:"/banner/saveBanner",method:"post",data:e})}function o(e){var a={};return a.id=e.id,a.isVisible=!e.isVisible,Object(r["b"])({url:"/banner/saveBanner",method:"post",data:a})}function l(e){var a={};return a.id=e.id,a.sortIndex=e.sortIndex+1,Object(r["b"])({url:"/banner/saveBanner",method:"post",data:a})}function c(e){var a={};return a.id=e.id,a.sortIndex=e.sortIndex-1,Object(r["b"])({url:"/banner/saveBanner",method:"post",data:a})}function d(e){return Object(r["b"])({url:"/banner/delBanner?id="+e.id,method:"get",data:e})}function u(e){return Object(r["b"])({url:"/banner/delBanners",method:"post",data:e})}},effc:function(e,a,t){"use strict";t("13be")}}]);